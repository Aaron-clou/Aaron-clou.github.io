<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dafny type system | Dafny</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/dafnycommunity/img/bgico2.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3282046_1qux519eoim.css">
    <script src="https://cdn.jsdelivr.net/npm/twikoo@1.5.0/dist/twikoo.all.min.js"></script>
    <meta name="description" content="Dafny中文社区">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/dafnycommunity/assets/css/0.styles.ecdcfe28.css" as="style"><link rel="preload" href="/dafnycommunity/assets/js/app.99d07194.js" as="script"><link rel="preload" href="/dafnycommunity/assets/js/2.ab4658c0.js" as="script"><link rel="preload" href="/dafnycommunity/assets/js/72.8252acc5.js" as="script"><link rel="preload" href="/dafnycommunity/assets/js/7.5451cfed.js" as="script"><link rel="preload" href="/dafnycommunity/assets/js/4.06497870.js" as="script"><link rel="prefetch" href="/dafnycommunity/assets/js/10.ac38cab7.js"><link rel="prefetch" href="/dafnycommunity/assets/js/11.38d5ee16.js"><link rel="prefetch" href="/dafnycommunity/assets/js/12.c434ce94.js"><link rel="prefetch" href="/dafnycommunity/assets/js/13.4e922264.js"><link rel="prefetch" href="/dafnycommunity/assets/js/14.db841cfa.js"><link rel="prefetch" href="/dafnycommunity/assets/js/15.b9c227cc.js"><link rel="prefetch" href="/dafnycommunity/assets/js/16.41dadc32.js"><link rel="prefetch" href="/dafnycommunity/assets/js/17.48b5f1eb.js"><link rel="prefetch" href="/dafnycommunity/assets/js/18.ec254833.js"><link rel="prefetch" href="/dafnycommunity/assets/js/19.288ca382.js"><link rel="prefetch" href="/dafnycommunity/assets/js/20.cfeb5fdb.js"><link rel="prefetch" href="/dafnycommunity/assets/js/21.ce8ddc5a.js"><link rel="prefetch" href="/dafnycommunity/assets/js/22.1b8c89f0.js"><link rel="prefetch" href="/dafnycommunity/assets/js/23.cb062ace.js"><link rel="prefetch" href="/dafnycommunity/assets/js/24.ff271672.js"><link rel="prefetch" href="/dafnycommunity/assets/js/25.5541f3af.js"><link rel="prefetch" href="/dafnycommunity/assets/js/26.a1bbc4cb.js"><link rel="prefetch" href="/dafnycommunity/assets/js/27.522d7884.js"><link rel="prefetch" href="/dafnycommunity/assets/js/28.9335c003.js"><link rel="prefetch" href="/dafnycommunity/assets/js/29.3fc0b07a.js"><link rel="prefetch" href="/dafnycommunity/assets/js/3.ab8a97d8.js"><link rel="prefetch" href="/dafnycommunity/assets/js/30.57708681.js"><link rel="prefetch" href="/dafnycommunity/assets/js/31.8571b949.js"><link rel="prefetch" href="/dafnycommunity/assets/js/32.f91be5de.js"><link rel="prefetch" href="/dafnycommunity/assets/js/33.8089c59b.js"><link rel="prefetch" href="/dafnycommunity/assets/js/34.874d0299.js"><link rel="prefetch" href="/dafnycommunity/assets/js/35.aff8adfd.js"><link rel="prefetch" href="/dafnycommunity/assets/js/36.ac78b86e.js"><link rel="prefetch" href="/dafnycommunity/assets/js/37.3fae0334.js"><link rel="prefetch" href="/dafnycommunity/assets/js/38.3db4a8d6.js"><link rel="prefetch" href="/dafnycommunity/assets/js/39.e585cc70.js"><link rel="prefetch" href="/dafnycommunity/assets/js/40.afcb8fbe.js"><link rel="prefetch" href="/dafnycommunity/assets/js/41.01f314da.js"><link rel="prefetch" href="/dafnycommunity/assets/js/42.8e4fe21d.js"><link rel="prefetch" href="/dafnycommunity/assets/js/43.571fb232.js"><link rel="prefetch" href="/dafnycommunity/assets/js/44.14aebad2.js"><link rel="prefetch" href="/dafnycommunity/assets/js/45.32f18970.js"><link rel="prefetch" href="/dafnycommunity/assets/js/46.ce0d522f.js"><link rel="prefetch" href="/dafnycommunity/assets/js/47.0bd83351.js"><link rel="prefetch" href="/dafnycommunity/assets/js/48.648f667a.js"><link rel="prefetch" href="/dafnycommunity/assets/js/49.83709ae0.js"><link rel="prefetch" href="/dafnycommunity/assets/js/5.b8548e7f.js"><link rel="prefetch" href="/dafnycommunity/assets/js/50.060e0424.js"><link rel="prefetch" href="/dafnycommunity/assets/js/51.a1291856.js"><link rel="prefetch" href="/dafnycommunity/assets/js/52.45f73497.js"><link rel="prefetch" href="/dafnycommunity/assets/js/53.525782ca.js"><link rel="prefetch" href="/dafnycommunity/assets/js/54.45a04a86.js"><link rel="prefetch" href="/dafnycommunity/assets/js/55.65a94ba0.js"><link rel="prefetch" href="/dafnycommunity/assets/js/56.2d038113.js"><link rel="prefetch" href="/dafnycommunity/assets/js/57.579db650.js"><link rel="prefetch" href="/dafnycommunity/assets/js/58.832d4c89.js"><link rel="prefetch" href="/dafnycommunity/assets/js/59.13befb53.js"><link rel="prefetch" href="/dafnycommunity/assets/js/6.349bf431.js"><link rel="prefetch" href="/dafnycommunity/assets/js/60.41227bb1.js"><link rel="prefetch" href="/dafnycommunity/assets/js/61.1d1b92f4.js"><link rel="prefetch" href="/dafnycommunity/assets/js/62.2cdbc236.js"><link rel="prefetch" href="/dafnycommunity/assets/js/63.83de9482.js"><link rel="prefetch" href="/dafnycommunity/assets/js/64.4ecd0d25.js"><link rel="prefetch" href="/dafnycommunity/assets/js/65.25118b81.js"><link rel="prefetch" href="/dafnycommunity/assets/js/66.cdab1b54.js"><link rel="prefetch" href="/dafnycommunity/assets/js/67.655e6e84.js"><link rel="prefetch" href="/dafnycommunity/assets/js/68.84effb44.js"><link rel="prefetch" href="/dafnycommunity/assets/js/69.8f07f81a.js"><link rel="prefetch" href="/dafnycommunity/assets/js/70.d9a299e6.js"><link rel="prefetch" href="/dafnycommunity/assets/js/71.16ef2000.js"><link rel="prefetch" href="/dafnycommunity/assets/js/73.f53e39bc.js"><link rel="prefetch" href="/dafnycommunity/assets/js/74.5ef910c4.js"><link rel="prefetch" href="/dafnycommunity/assets/js/75.72174d00.js"><link rel="prefetch" href="/dafnycommunity/assets/js/76.bebf75c9.js"><link rel="prefetch" href="/dafnycommunity/assets/js/77.b85547c7.js"><link rel="prefetch" href="/dafnycommunity/assets/js/78.a0a1f574.js"><link rel="prefetch" href="/dafnycommunity/assets/js/79.a731d645.js"><link rel="prefetch" href="/dafnycommunity/assets/js/8.522ce892.js"><link rel="prefetch" href="/dafnycommunity/assets/js/80.6e5b64b0.js"><link rel="prefetch" href="/dafnycommunity/assets/js/81.6e19e312.js"><link rel="prefetch" href="/dafnycommunity/assets/js/82.9244e788.js"><link rel="prefetch" href="/dafnycommunity/assets/js/83.f08c5aed.js"><link rel="prefetch" href="/dafnycommunity/assets/js/84.085ef3f8.js"><link rel="prefetch" href="/dafnycommunity/assets/js/85.c41e6e0e.js"><link rel="prefetch" href="/dafnycommunity/assets/js/86.e3798708.js"><link rel="prefetch" href="/dafnycommunity/assets/js/87.fdac1c1c.js"><link rel="prefetch" href="/dafnycommunity/assets/js/88.665ac8c8.js"><link rel="prefetch" href="/dafnycommunity/assets/js/89.78dc55eb.js"><link rel="prefetch" href="/dafnycommunity/assets/js/9.4d4f4bdb.js"><link rel="prefetch" href="/dafnycommunity/assets/js/90.4757b202.js"><link rel="prefetch" href="/dafnycommunity/assets/js/91.a0746cf2.js">
    <link rel="stylesheet" href="/dafnycommunity/assets/css/0.styles.ecdcfe28.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dafnycommunity/" class="home-link router-link-active"><img src="/dafnycommunity/img/logo-2.png" alt="Dafny" class="logo"> <span class="site-name can-hide">Dafny</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dafnycommunity/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="配置" class="dropdown-title"><a href="/dafnycommunity/peizhi/" class="link-title">配置</a> <span class="title" style="display:none;">配置</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>入门介绍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/56e571/" class="nav-link">什么是dafny?</a></li></ul></li><li class="dropdown-item"><h4>用起来吧！</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/4fa796/" class="nav-link">安装</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/085606/" class="nav-link">快速上手</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/39fb20/" class="nav-link">可能遇到的问题?</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><a href="/dafnycommunity/zhinan/" class="link-title">指南</a> <span class="title" style="display:none;">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Dafny快速入门</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/6e15a6/" class="nav-link">基础学习 Basic</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/eba166/" class="nav-link">方法 Method</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/83cdf9/" class="nav-link">关键字 Keyword</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/01d76e/" class="nav-link">函数 Function</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/0fadc1/" class="nav-link">类 Class </a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/a010ab/" class="nav-link">泛型 Generics</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/c4fda3/" class="nav-link">声明 Statement</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/e8438e/" class="nav-link">表达式 Expression</a></li></ul></li><li class="dropdown-item"><h4>Dafny简单例子</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/0978ce/" class="nav-link">寻找最大最小数和</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/e3e481/" class="nav-link">斐波那契数列</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/02fdef/" class="nav-link">线性查询</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/9b332b/" class="nav-link">引理-计算序列非负元素个数</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/3d1110/" class="nav-link">集合</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/2146d4/" class="nav-link">终止</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><a href="/dafnycommunity/jiaocheng/" class="link-title">教程</a> <span class="title" style="display:none;">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Dafny指导</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/877eb3/" class="nav-link">介绍</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/bf40c0/" class="nav-link">方法 Methods</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/2e0c73/" class="nav-link">前置/后置条件 Pre/Postconditions</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/36c1b4/" class="nav-link">断言 Assertions</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/a1d5a4/" class="nav-link">函数 Functions</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/d89435/" class="nav-link">循环不变体 Loop Invariants</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/828a83/" class="nav-link">数组 Arrays</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/17e8d1/" class="nav-link">量词(函数) Quantifiers</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/cc01af/" class="nav-link">谓词(函数) Predicates</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/13bbcd/" class="nav-link">框架 Framing</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/1319be/" class="nav-link">二分搜索 Binary Search</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/30a8c2/" class="nav-link">总结</a></li></ul></li><li class="dropdown-item"><h4>Dafny进阶语法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/273cac/" class="nav-link">引理和归纳 Lemmas and Induction</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/9d19b8/" class="nav-link">模块 Modules</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/b9300a/" class="nav-link">集合 sets</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/cb3d21/" class="nav-link">序列 sequence</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/fc6196/" class="nav-link">终止 Terminal</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/a2a107/" class="nav-link">值类型 Values Types</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源" class="dropdown-title"><a href="/dafnycommunity/ziyuan/" class="link-title">资源</a> <span class="title" style="display:none;">资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>实践探索</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/718207/" class="nav-link">自动归纳</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/1f579f/" class="nav-link">自动调用引理</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/f6638c/" class="nav-link">定义、证明、算法正确性</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/1d2420/" class="nav-link">各种推导式</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/20c275/" class="nav-link">不同类型的证明</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/67167e/" class="nav-link">集合元素上的函数</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/be298d/" class="nav-link">在集合上的迭代</a></li></ul></li><li class="dropdown-item"><h4>常用工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/8065fd/" class="nav-link">Type System</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/0f17ab/" class="nav-link">Style Guide</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/fe5721/" class="nav-link">Cheet Sheet</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/dafnycommunity/pages/1b94a4/" class="nav-link">✨收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏷️语言" class="dropdown-title"><!----> <span class="title" style="display:;">🏷️语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dafnycommunity/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/dafnycommunity/en-US/" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="/dafnycommunity/pages/caf1f9/" class="nav-link">💬社区留言板</a></div> <a href="https://github.com/aaron-clou/dafnycommunity" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://s1.ax1x.com/2022/04/01/qh3tDe.png"> <div class="blogger-info"><h3>Dafny</h3> <span>新一代验证语言</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/dafnycommunity/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="配置" class="dropdown-title"><a href="/dafnycommunity/peizhi/" class="link-title">配置</a> <span class="title" style="display:none;">配置</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>入门介绍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/56e571/" class="nav-link">什么是dafny?</a></li></ul></li><li class="dropdown-item"><h4>用起来吧！</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/4fa796/" class="nav-link">安装</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/085606/" class="nav-link">快速上手</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/39fb20/" class="nav-link">可能遇到的问题?</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><a href="/dafnycommunity/zhinan/" class="link-title">指南</a> <span class="title" style="display:none;">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Dafny快速入门</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/6e15a6/" class="nav-link">基础学习 Basic</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/eba166/" class="nav-link">方法 Method</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/83cdf9/" class="nav-link">关键字 Keyword</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/01d76e/" class="nav-link">函数 Function</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/0fadc1/" class="nav-link">类 Class </a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/a010ab/" class="nav-link">泛型 Generics</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/c4fda3/" class="nav-link">声明 Statement</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/e8438e/" class="nav-link">表达式 Expression</a></li></ul></li><li class="dropdown-item"><h4>Dafny简单例子</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/0978ce/" class="nav-link">寻找最大最小数和</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/e3e481/" class="nav-link">斐波那契数列</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/02fdef/" class="nav-link">线性查询</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/9b332b/" class="nav-link">引理-计算序列非负元素个数</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/3d1110/" class="nav-link">集合</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/2146d4/" class="nav-link">终止</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><a href="/dafnycommunity/jiaocheng/" class="link-title">教程</a> <span class="title" style="display:none;">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Dafny指导</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/877eb3/" class="nav-link">介绍</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/bf40c0/" class="nav-link">方法 Methods</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/2e0c73/" class="nav-link">前置/后置条件 Pre/Postconditions</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/36c1b4/" class="nav-link">断言 Assertions</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/a1d5a4/" class="nav-link">函数 Functions</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/d89435/" class="nav-link">循环不变体 Loop Invariants</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/828a83/" class="nav-link">数组 Arrays</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/17e8d1/" class="nav-link">量词(函数) Quantifiers</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/cc01af/" class="nav-link">谓词(函数) Predicates</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/13bbcd/" class="nav-link">框架 Framing</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/1319be/" class="nav-link">二分搜索 Binary Search</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/30a8c2/" class="nav-link">总结</a></li></ul></li><li class="dropdown-item"><h4>Dafny进阶语法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/273cac/" class="nav-link">引理和归纳 Lemmas and Induction</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/9d19b8/" class="nav-link">模块 Modules</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/b9300a/" class="nav-link">集合 sets</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/cb3d21/" class="nav-link">序列 sequence</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/fc6196/" class="nav-link">终止 Terminal</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/a2a107/" class="nav-link">值类型 Values Types</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源" class="dropdown-title"><a href="/dafnycommunity/ziyuan/" class="link-title">资源</a> <span class="title" style="display:none;">资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>实践探索</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/718207/" class="nav-link">自动归纳</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/1f579f/" class="nav-link">自动调用引理</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/f6638c/" class="nav-link">定义、证明、算法正确性</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/1d2420/" class="nav-link">各种推导式</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/20c275/" class="nav-link">不同类型的证明</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/67167e/" class="nav-link">集合元素上的函数</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/be298d/" class="nav-link">在集合上的迭代</a></li></ul></li><li class="dropdown-item"><h4>常用工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dafnycommunity/pages/8065fd/" class="nav-link">Type System</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/0f17ab/" class="nav-link">Style Guide</a></li><li class="dropdown-subitem"><a href="/dafnycommunity/pages/fe5721/" class="nav-link">Cheet Sheet</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/dafnycommunity/pages/1b94a4/" class="nav-link">✨收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏷️语言" class="dropdown-title"><!----> <span class="title" style="display:;">🏷️语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dafnycommunity/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/dafnycommunity/en-US/" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="/dafnycommunity/pages/caf1f9/" class="nav-link">💬社区留言板</a></div> <a href="https://github.com/aaron-clou/dafnycommunity" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>dafny-quick-start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>dafny-tutorials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>detailed-document</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dafnycommunity/pages/a9c4a5/" aria-current="page" class="active sidebar-link">Dafny type system</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/dafnycommunity/pages/a9c4a5/#_0-basic-types" class="sidebar-link">0. Basic types</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_0-0-booleans" class="sidebar-link">0.0. Booleans</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_0-1-numeric-types" class="sidebar-link">0.1. Numeric types</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_0-2-characters" class="sidebar-link">0.2. Characters</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/dafnycommunity/pages/a9c4a5/#_1-type-parameters" class="sidebar-link">1. Type parameters</a></li><li class="sidebar-sub-header level2"><a href="/dafnycommunity/pages/a9c4a5/#_2-collection-types" class="sidebar-link">2. Collection types</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_2-0-sets" class="sidebar-link">2.0. Sets</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_2-1-multisets" class="sidebar-link">2.1. Multisets</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_2-2-sequences" class="sidebar-link">2.2. Sequences</a></li><li class="sidebar-sub-header level4"><a href="/dafnycommunity/pages/a9c4a5/#_2-2-0-strings" class="sidebar-link">2.2.0. Strings</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_2-3-finite-and-infinite-maps" class="sidebar-link">2.3. Finite and Infinite Maps</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/dafnycommunity/pages/a9c4a5/#_3-types-that-stand-for-other-types" class="sidebar-link">3. Types that stand for other types</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_3-0-type-synonyms" class="sidebar-link">3.0. Type synonyms</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_3-1-opaque-types" class="sidebar-link">3.1. Opaque types</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/dafnycommunity/pages/a9c4a5/#_4-datatypes" class="sidebar-link">4. Datatypes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_4-0-inductive-datatypes" class="sidebar-link">4.0. Inductive datatypes</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_4-1-tuple-types" class="sidebar-link">4.1. Tuple types</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_4-2-co-inductive-datatypes" class="sidebar-link">4.2. Co-inductive datatypes</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/dafnycommunity/pages/a9c4a5/#_5-reference-types" class="sidebar-link">5. Reference types</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_5-0-classes" class="sidebar-link">5.0. Classes</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_5-1-arrays" class="sidebar-link">5.1. Arrays</a></li><li class="sidebar-sub-header level4"><a href="/dafnycommunity/pages/a9c4a5/#_5-1-0-one-dimensional-arrays" class="sidebar-link">5.1.0. One-dimensional arrays</a></li><li class="sidebar-sub-header level4"><a href="/dafnycommunity/pages/a9c4a5/#_5-1-1-multi-dimensional-arrays" class="sidebar-link">5.1.1. Multi-dimensional arrays</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_5-2-traits" class="sidebar-link">5.2. Traits</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_5-3-type-object" class="sidebar-link">5.3. Type object</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_5-4-iterator-types" class="sidebar-link">5.4. Iterator types</a></li><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_5-5-async-task-types" class="sidebar-link">5.5. Async-task types</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/dafnycommunity/pages/a9c4a5/#_6-function-types" class="sidebar-link">6. Function types</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_6-0-lambda-expressions" class="sidebar-link">6.0. Lambda expressions</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/dafnycommunity/pages/a9c4a5/#_7-newtypes" class="sidebar-link">7. Newtypes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/dafnycommunity/pages/a9c4a5/#_7-0-numeric-conversion-operations" class="sidebar-link">7.0. Numeric conversion operations</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/dafnycommunity/pages/a9c4a5/#_8-subset-types" class="sidebar-link">8. Subset types</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/dafnycommunity/pages/a9c4a5/#acknowledgments" class="sidebar-link">Acknowledgments</a></li></ul></li></ul></li><li><a href="/dafnycommunity/pages/c0c2c7/" class="sidebar-link">Style Guide for Dafny programs</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>publication-lecture</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/dafnycommunity/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/dafnycommunity/en-US/#语言" data-v-0c557b5e>语言</a></li><li data-v-0c557b5e><a href="/dafnycommunity/en-US/#detailed-document" data-v-0c557b5e>detailed-document</a></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="https://github.com/Aaron-clou" target="_blank" title="作者" class="beLink" data-v-0c557b5e>lijiahai</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2022-03-26</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Dafny type system<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="types-in-dafny"><a href="#types-in-dafny" class="header-anchor">#</a> Types in Dafny</h1> <p>Manuscript KRML 243
27 February 2015</p> <p>K. Rustan M. Leinoleino@microsoft.com</p> <p>This part of the Dafny language reference describes the types in the Dafny programming language. What is described is what is implemented in version 1.9.3.20107 of Dafny, with the exception of async-task types which have not yet made it into the main branch.</p> <p><a href="http://leino.science/papers/krml243.html#sec-basic-types" target="_blank" rel="noopener noreferrer">0. Basic types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-booleans" target="_blank" rel="noopener noreferrer">0.0. Booleans<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-numeric-types" target="_blank" rel="noopener noreferrer">0.1. Numeric types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-char" target="_blank" rel="noopener noreferrer">0.2. Characters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-type-parameters" target="_blank" rel="noopener noreferrer">1. Type parameters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-collection-types" target="_blank" rel="noopener noreferrer">2. Collection types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-sets" target="_blank" rel="noopener noreferrer">2.0. Sets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-multisets" target="_blank" rel="noopener noreferrer">2.1. Multisets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-sequences" target="_blank" rel="noopener noreferrer">2.2. Sequences<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-string" target="_blank" rel="noopener noreferrer">2.2.0. Strings<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-finite-and-infinite-maps" target="_blank" rel="noopener noreferrer">2.3. Finite and Infinite Maps<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-types-that-stand-for-other-types" target="_blank" rel="noopener noreferrer">3. Types that stand for other types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-type-synonyms" target="_blank" rel="noopener noreferrer">3.0. Type synonyms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-opaque-types" target="_blank" rel="noopener noreferrer">3.1. Opaque types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-datatypes" target="_blank" rel="noopener noreferrer">4. Datatypes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-inductive-datatypes" target="_blank" rel="noopener noreferrer">4.0. Inductive datatypes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-tuple-types" target="_blank" rel="noopener noreferrer">4.1. Tuple types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-co-inductive-datatypes" target="_blank" rel="noopener noreferrer">4.2. Co-inductive datatypes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-reference-types" target="_blank" rel="noopener noreferrer">5. Reference types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-classes" target="_blank" rel="noopener noreferrer">5.0. Classes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-arrays" target="_blank" rel="noopener noreferrer">5.1. Arrays<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-one-dimensional-arrays" target="_blank" rel="noopener noreferrer">5.1.0. One-dimensional arrays<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-multi-dimensional-arrays" target="_blank" rel="noopener noreferrer">5.1.1. Multi-dimensional arrays<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-traits" target="_blank" rel="noopener noreferrer">5.2. Traits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-type-object" target="_blank" rel="noopener noreferrer">5.3. Type <code>object</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-iterator-types" target="_blank" rel="noopener noreferrer">5.4. Iterator types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-async-task-types" target="_blank" rel="noopener noreferrer">5.5. Async-task types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-function-types" target="_blank" rel="noopener noreferrer">6. Function types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-lambda-expressions" target="_blank" rel="noopener noreferrer">6.0. Lambda expressions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-newtypes" target="_blank" rel="noopener noreferrer">7. Newtypes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-numeric-conversions" target="_blank" rel="noopener noreferrer">7.0. Numeric conversion operations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://leino.science/papers/krml243.html#sec-subset-types" target="_blank" rel="noopener noreferrer">8. Subset types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_0-basic-types"><a href="#_0-basic-types" class="header-anchor">#</a> 0. Basic types</h2> <p>Dafny offers three basic types, <code>bool</code> for booleans, <code>int</code> for integers, and <code>real</code> for reals.</p> <h3 id="_0-0-booleans"><a href="#_0-0-booleans" class="header-anchor">#</a> 0.0. Booleans</h3> <p>There are two boolean values and each has a corresponding literal in the language: <code>false</code> and <code>true</code>.</p> <p>In addition to equality (<code>==</code>) and disequality (<code>!=</code>), which are defined on all types, type <code>bool</code> supports the following operations:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>&lt;==&gt;</code></td> <td>equivalence (if and only if)</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>==&gt;</code></td> <td>implication (implies)</td></tr> <tr><td><code>&lt;==</code></td> <td>reverse implication (follows from)</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>&amp;&amp;</code></td> <td>conjunction (and)</td></tr> <tr><td>||</td> <td>disjunction (or)</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>!</code></td> <td>negation (not)</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>Negation is unary; the others are binary. The table shows the operators in groups of increasing binding power, with equality binding stronger than conjunction and disjunction, and weaker than negation. Within each group, different operators do not associate, so parentheses need to be used. For example,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A &amp;&amp; B || C    // error
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>would be ambiguous and instead has to be written as either</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>(A &amp;&amp; B) || C
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>or</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A &amp;&amp; (B || C)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>depending on the intended meaning.</p> <p>The expressions <code>A &lt;==&gt; B</code> and <code>A == B</code> give the same value, but note that <code>&lt;==&gt;</code> is <em>associative</em> whereas <code>==</code> is <em>chaining</em>. So,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A &lt;==&gt; B &lt;==&gt; C
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>is the same as</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A &lt;==&gt; (B &lt;==&gt; C)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>and</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>(A &lt;==&gt; B) &lt;==&gt; C
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>whereas</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A == B == C
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>is simply a shorthand for</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A == B &amp;&amp; B == C
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Conjunction is associative and so is disjunction. These operators are are <em>short circuiting (from left to right)</em>, meaning that their second argument is evaluated only if the evaluation of the first operand does not determine the value of the expression. Logically speaking, the expression <code>A &amp;&amp; B</code> is defined when <code>A</code> is defined and either <code>A</code> evaluates to <code>false</code> or <code>B</code> is defined. When <code>A &amp;&amp; B</code> is defined, its meaning is the same as the ordinary, symmetric mathematical conjunction ∧. The same holds for <code>||</code> and ∨.</p> <p>Implication is <em>right associative</em> and is short-circuiting from left to right. Reverse implication <code>B &lt;== A</code> is exactly the same as <code>A ==&gt; B</code>, but gives the ability to write the operands in the opposite order. Consequently, reverse implication is <em>left associative</em> and is short-circuiting from <em>right to left</em>. To illustrate the associativity rules, each of the following four lines expresses the same property, for any <code>A</code>, <code>B</code>, and <code>C</code> of type <code>bool</code>:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A ==&gt; B ==&gt; C
A ==&gt; (B ==&gt; C)  // parentheses redundant, since ==&gt; is right associative
C &lt;== B &lt;== A
(C &lt;== B) &lt;== A  // parentheses redundant, since &lt;== is left associative
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>To illustrate the short-circuiting rules, note that the expression <code>a.Length</code> is defined for an array <code>a</code> only if <code>a</code> is not <code>null</code> (see Section <a href="http://leino.science/papers/krml243.html#sec-reference-types" target="_blank" rel="noopener noreferrer">5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>), which means the following two expressions are well-formed:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>a != null ==&gt; 0 &lt;= a.Length
0 &lt;= a.Length &lt;== a != null
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The contrapositive of these two expressions would be:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>a.Length &lt; 0 ==&gt; a == null  // not well-formed
a == null &lt;== a.Length &lt; 0  // not well-formed
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>but these expressions are not well-formed, since well-formedness requires the left (and right, respectively) operand, <code>a.Length &lt; 0</code>, to be well-formed by itself.</p> <p>Implication <code>A ==&gt; B</code> is equivalent to the disjunction <code>!A || B</code>, but is sometimes (especially in specifications) clearer to read. Since, <code>||</code> is short-circuiting from left to right, note that</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>a == null || 0 &lt;= a.Length
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>is well-formed, whereas</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>0 &lt;= a.Length || a == null  // not well-formed
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>is not.</p> <p>In addition, booleans support <em>logical quantifiers</em> (forall and exists), described in a different part of the Dafny language reference.</p> <h3 id="_0-1-numeric-types"><a href="#_0-1-numeric-types" class="header-anchor">#</a> 0.1. Numeric types</h3> <p>Dafny supports <em>numeric types</em> of two kinds, <em>integer-based</em>, which includes the basic type <code>int</code> of all integers, and <em>real-based</em>, which includes the basic type <code>real</code> of all real numbers. User-defined numeric types based on <code>int</code> and <code>real</code>, called <em>newtypes</em>, are described in Section <a href="http://leino.science/papers/krml243.html#sec-newtypes" target="_blank" rel="noopener noreferrer">7<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Also, the <em>subset type</em> <code>nat</code>, representing the non-negative subrange of <code>int</code>, is described in Section <a href="http://leino.science/papers/krml243.html#sec-subset-types" target="_blank" rel="noopener noreferrer">8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>The language includes a literal for each non-negative integer, like <code>0</code>, <code>13</code>, and <code>1985</code>. Integers can also be written in hexadecimal using the prefix “<code>0x</code>”, as in <code>0x0</code>, <code>0xD</code>, and <code>0x7c1</code> (always with a lower case <code>x</code>, but the hexadecimal digits themselves are case insensitive). Leading zeros are allowed. To form negative integers, use the unary minus operator.</p> <p>There are also literals for some of the non-negative reals. These are written as a decimal point with a nonempty sequence of decimal digits on both sides. For example, <code>1.0</code>, <code>1609.344</code>, and <code>0.5772156649</code>.</p> <p>For integers (in both decimal and hexidecimal form) and reals, any two digits in a literal may be separated by an underscore in order to improve human readability of the literals. For example:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>1_000_000        // easier to read than 1000000
0_12_345_6789    // strange but legal formatting of 123456789
0x8000_0000      // same as 0x80000000 -- hex digits are often placed in groups of 4
0.000_000_000_1  // same as 0.0000000001 -- 1 Ångström
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>In addition to equality and disequality, numeric types support the following relational operations:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td>&lt;</td> <td>less than</td></tr> <tr><td><code>&lt;=</code></td> <td>at most</td></tr> <tr><td><code>&gt;=</code></td> <td>at least</td></tr> <tr><td><code>&gt;</code></td> <td>greater than</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>Like equality and disequality, these operators are chaining, as long as they are chained in the “same direction”. That is,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A &lt;= B &lt; C == D &lt;= E
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>is simply a shorthand for</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A &lt;= B &amp;&amp; B &lt; C &amp;&amp; C == D &amp;&amp; D &lt;= E
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>whereas</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A &lt; B &gt; C
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>is not allowed.</p> <p>There are also operators on each numeric type:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>+</code></td> <td>addition (plus)</td></tr> <tr><td><code>-</code></td> <td>subtraction (minus)</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>*</code></td> <td>multiplication (times)</td></tr> <tr><td><code>/</code></td> <td>division (divided by)</td></tr> <tr><td><code>%</code></td> <td>modulus (mod)</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>-</code></td> <td>negation (unary minus)</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>The binary operators are left associative, and they associate with each other in the two groups. The groups are listed in order of increasing binding power, with equality binding more strongly than the multiplicative operators and weaker than the unary operator. Modulus is supported only for integer-based numeric types. Integer division and modulus are the <em>Euclidean division and modulus</em>. This means that modulus always returns a non-negative, regardless of the signs of the two operands. More precisely, for any integer <code>a</code> and non-zero integer <code>b</code>,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>a == a / b * b + a % b
0 &lt;= a % b &lt; B
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>where <code>B</code> denotes the absolute value of <code>b</code>.</p> <p>Real-based numeric types have a member <code>Trunc</code> that returns the <em>floor</em> of the real value, that is, the largest integer not exceeding the real value. For example, the following properties hold, for any <code>r</code> and <code>r'</code> of type <code>real</code>:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>3.14.Trunc == 3
(-2.5).Trunc == -3
-2.5.Trunc == -2
real(r.Trunc) &lt;= r
r &lt;= r' ==&gt; r.Trunc &lt;= r'.Trunc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Note in the third line that member access (like <code>.Trunc</code>) binds stronger than unary minus. The fourth line uses the conversion function <code>real</code> from <code>int</code> to <code>real</code>, as described in Section <a href="http://leino.science/papers/krml243.html#sec-numeric-conversions" target="_blank" rel="noopener noreferrer">7.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="_0-2-characters"><a href="#_0-2-characters" class="header-anchor">#</a> 0.2. Characters</h3> <p>Dafny supports a type <code>char</code> of <em>characters</em>. Character literals are enclosed in single quotes, as in <code>'D'</code>. To write a single quote as a character literal, it is necessary to use an <em>escape sequence</em>. Escape sequences can also be used to write other characters. The supported escape sequences are as follows:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>escape sequence</td> <td>meaning</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>\'</code></td> <td>the character <code>'</code></td></tr> <tr><td>&quot;</td> <td>the character &quot;</td></tr> <tr><td><code>\\</code></td> <td>the character <code>\</code></td></tr> <tr><td><code>\0</code></td> <td>the null character, same as <code>\u0000</code></td></tr> <tr><td><code>\n</code></td> <td>line feed</td></tr> <tr><td><code>\r</code></td> <td>carriage return</td></tr> <tr><td><code>\t</code></td> <td>horizontal tab</td></tr> <tr><td><code>\u*xxxx*</code></td> <td>universal character whose hexadecimal code is <code>*xxxx*</code></td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>The escape sequence for a double quote is redundant, because '&quot;' and '&quot;' denote the same character—both forms are provided in order to support the same escape sequences as for string literals (Section <a href="http://leino.science/papers/krml243.html#sec-string" target="_blank" rel="noopener noreferrer">2.2.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). In the form <code>\u*xxxx*</code>, the <code>u</code> is always lower case, but the four hexadecimal digits are case insensitive.</p> <p>Character values are ordered and can be compared using the standard relational operators:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td>&lt;</td> <td>less than</td></tr> <tr><td><code>&lt;=</code></td> <td>at most</td></tr> <tr><td><code>&gt;=</code></td> <td>at least</td></tr> <tr><td><code>&gt;</code></td> <td>greater than</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>Sequences of characters represent <em>strings</em>, as described in Section <a href="http://leino.science/papers/krml243.html#sec-string" target="_blank" rel="noopener noreferrer">2.2.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="_1-type-parameters"><a href="#_1-type-parameters" class="header-anchor">#</a> 1. Type parameters</h2> <p>Many of the types (as well as functions and methods) in Dafny can be parameterized by types. These <em>type parameters</em> are typically declared inside angle brackets and can stand for any type. It is sometimes necessary to restrict these type parameters so that they can only be instantiated by certain families of types. As such, Dafny distinguishes types that support the equality operation not only in ghost contexts but also in compiled contexts. To indicate that a type parameter is restricted to such <em>equality supporting</em> types, the name of the type parameter takes the suffix “<code>(==)</code>”.<a href="http://leino.science/papers/krml243.html#fn-fn-type-mode" target="_blank" rel="noopener noreferrer">0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> For example,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>method Compare〈T(==)〉(a: T, b: T) returns (eq: bool)
{
  if a == b { eq := true; } else { eq := false; }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>is a method whose type parameter is restricted to equality-supporting types. Again, note that <em>all</em> types support equality in <em>ghost</em> contexts; the difference is only for non-ghost (that is, compiled) code. Co-inductive datatypes, function types, as well as inductive datatypes with ghost parameters are examples of types that are not equality supporting.</p> <p>Dafny has some inference support that makes certain signatures less cluttered (described in a different part of the Dafny language reference). In some cases, this support will infer that a type parameter must be restricted to equality-supporting types, in which case Dafny adds the “<code>(==)</code>” automatically.</p> <h2 id="_2-collection-types"><a href="#_2-collection-types" class="header-anchor">#</a> 2. Collection types</h2> <p>Dafny offers several built-in collection types.</p> <h3 id="_2-0-sets"><a href="#_2-0-sets" class="header-anchor">#</a> 2.0. Sets</h3> <p>For any type <code>T</code>, each value of type <code>set〈T〉</code> is a finite set of <code>T</code> values. Set membership is determined by equality in the type <code>T</code>, so <code>set〈T〉</code> can be used in a non-ghost context only if <code>T</code> is equality supporting.</p> <p>A set can be formed using a <em>set display</em> expression, which is a possibly empty, unordered, duplicate-insensitive list of expressions enclosed in curly braces. To illustrate,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>{}        {2, 7, 5, 3}        {4+2, 1+5, a*b}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>are three examples of set displays. There is also a <em>set comprehension</em> expression (with a binder, like in logical quantifications), described in a different part of the Dafny language reference.</p> <p>In addition to equality and disequality, set types support the following relational operations:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td>&lt;</td> <td>proper subset</td></tr> <tr><td><code>&lt;=</code></td> <td>subset</td></tr> <tr><td><code>&gt;=</code></td> <td>superset</td></tr> <tr><td><code>&gt;</code></td> <td>proper superset</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>Like the arithmetic relational operators, these operators are chaining.</p> <p>Sets support the following binary operators, listed in order of increasing binding power:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>!!</code></td> <td>disjointness</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>+</code></td> <td>set union</td></tr> <tr><td><code>-</code></td> <td>set difference</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>*</code></td> <td>set intersection</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>The associaivity rules of <code>+</code>, <code>-</code>, and <code>*</code> are like those of the arithmetic operators with the same names. The expression <code>A !! B</code>, whose binding power is the same as equality (but which neither associates nor chains with equality), says that sets <code>A</code> and <code>B</code> have no elements in common, that is, it is equivalent to</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A * B == {}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>However, the disjointness operator is chaining, so <code>A !! B !! C !! D</code> means:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A * B == {} &amp;&amp; (A + B) * C == {} &amp;&amp; (A + B + C) * D == {}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>In addition, for any set <code>s</code> of type <code>set〈T〉</code> and any expression <code>e</code> of type <code>T</code>, sets support the following operations:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>expression</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td>|s|</td> <td>set cardinality</td></tr> <tr><td><code>e in s</code></td> <td>set membership</td></tr> <tr><td><code>e !in s</code></td> <td>set non-membership</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>The expression <code>e !in s</code> is a syntactic shorthand for <code>!(e in s)</code>.</p> <h3 id="_2-1-multisets"><a href="#_2-1-multisets" class="header-anchor">#</a> 2.1. Multisets</h3> <p>A <em>multiset</em> is similar to a set, but keeps track of the multiplicity of each element, not just its presence or absence. For any type <code>T</code>, each value of type <code>multiset〈T〉</code> is a map from <code>T</code> values to natural numbers denoting each element's multiplicity. Multisets in Dafny are finite, that is, they contain a finite number of each of a finite set of elements. Stated differently, a multiset maps only a finite number of elements to non-zero (finite) multiplicities.</p> <p>Like sets, multiset membership is determined by equality in the type <code>T</code>, so <code>multiset〈T〉</code> can be used in a non-ghost context only if <code>T</code> is equality supporting.</p> <p>A multiset can be formed using a <em>multiset display</em> expression, which is a possibly empty, unordered list of expressions enclosed in curly braces after the keyword <code>multiset</code>. To illustrate,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>multiset{}    multiset{0, 1, 1, 2, 3, 5}    multiset{4+2, 1+5, a*b}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>are three examples of multiset displays. There is no multiset comprehension expression.</p> <p>In addition to equality and disequality, multiset types support the following relational operations:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td>&lt;</td> <td>proper multiset subset</td></tr> <tr><td><code>&lt;=</code></td> <td>multiset subset</td></tr> <tr><td><code>&gt;=</code></td> <td>multiset superset</td></tr> <tr><td><code>&gt;</code></td> <td>proper multiset superset</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>Like the arithmetic relational operators, these operators are chaining.</p> <p>Multisets support the following binary operators, listed in order of increasing binding power:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>!!</code></td> <td>multiset disjointness</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>+</code></td> <td>multiset union</td></tr> <tr><td><code>-</code></td> <td>multiset difference</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>*</code></td> <td>multiset intersection</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>The associaivity rules of <code>+</code>, <code>-</code>, and <code>*</code> are like those of the arithmetic operators with the same names. The expression <code>A !! B</code> says that multisets <code>A</code> and <code>B</code> have no elements in common, that is, it is equivalent to</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>A * B == multiset{}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Like the analogous set operator, <code>!!</code> is chaining.</p> <p>In addition, for any multiset <code>s</code> of type <code>multiset〈T〉</code>, expression <code>e</code> of type <code>T</code>, and non-negative integer-based numeric <code>n</code>, multisets support the following operations:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>expression</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td>|s|</td> <td>multiset cardinality</td></tr> <tr><td><code>e in s</code></td> <td>multiset membership</td></tr> <tr><td><code>e !in s</code></td> <td>multiset non-membership</td></tr> <tr><td><code>s[e]</code></td> <td>multiplicity of <code>e</code> in <code>s</code></td></tr> <tr><td><code>s[e := n]</code></td> <td>multiset update (change of multiplicity)</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>The expression <code>e in s</code> returns <code>true</code> if and only if <code>s[e] != 0</code>. The expression <code>e !in s</code> is a syntactic shorthand for <code>!(e in s)</code>. The expression <code>s[e := n]</code> denotes a multiset like <code>s</code>, but where the multiplicity of element <code>e</code> is <code>n</code>. Note that the multiset update <code>s[e := 0]</code> results in a multiset like <code>s</code> but without any occurrences of <code>e</code> (whether or not <code>s</code> has occurrences of <code>e</code> in the first place). As another example, note that <code>s - multiset{e}</code> is equivalent to:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>if e in s then s[e := s[e] - 1] else s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-2-sequences"><a href="#_2-2-sequences" class="header-anchor">#</a> 2.2. Sequences</h3> <p>For any type <code>T</code>, a value of type <code>seq〈T〉</code> denotes a <em>sequence</em> of <code>T</code> elements, that is, a mapping from a finite set of consecutive natural numbers (called <em>indicies</em>) to <code>T</code> values. (Thinking of it as a map, a sequence is therefore something of a dual of a multiset.)</p> <p>A sequence can be formed using a <em>sequence display</em> expression, which is a possibly empty, ordered list of expressions enclosed in square brackets. To illustrate,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>[]        [3, 1, 4, 1, 5, 9, 3]        [4+2, 1+5, a*b]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>are three examples of sequence displays. There is no sequence comprehension expression.</p> <p>In addition to equality and disequality, sequence types support the following relational operations:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td>&lt;</td> <td>proper prefix</td></tr> <tr><td><code>&lt;=</code></td> <td>prefix</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>Like the arithmetic relational operators, these operators are chaining. Note the absence of <code>&gt;</code> and <code>&gt;=</code>.</p> <p>Sequences support the following binary operator:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>operator</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>+</code></td> <td>concatenation</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>Operator <code>+</code> is associative, like the arithmetic operator with the same name.</p> <p>In addition, for any sequence <code>s</code> of type <code>seq〈T〉</code>, expression <code>e</code> of type <code>T</code>, integer-based numeric <code>i</code> satisfying <code>0 &lt;= i &lt; |s|</code>, and integer-based numerics <code>lo</code> and <code>hi</code> satisfying <code>0 &lt;= lo &lt;= hi &lt;= |s|</code>, sequences support the following operations:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>expression</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td>|s|</td> <td>sequence length</td></tr> <tr><td><code>s[i]</code></td> <td>sequence selection</td></tr> <tr><td><code>s[i := e]</code></td> <td>sequence update</td></tr> <tr><td><code>e in s</code></td> <td>sequence membership</td></tr> <tr><td><code>e !in s</code></td> <td>sequence non-membership</td></tr> <tr><td><code>s[lo..hi]</code></td> <td>subsequence</td></tr> <tr><td><code>s[lo..]</code></td> <td>drop</td></tr> <tr><td><code>s[..hi]</code></td> <td>take</td></tr> <tr><td><code>s[*slices*]</code></td> <td>slice</td></tr> <tr><td><code>multiset(s)</code></td> <td>sequence conversion to a <code>multiset〈T〉</code></td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>Expression <code>s[i := e]</code> returns a sequence like <code>s</code>, except that the element at index <code>i</code> is <code>e</code>. The expression <code>e in s</code> says there exists an index <code>i</code> such that <code>s[i] == e</code>. It is allowed in non-ghost contexts only if the element type <code>T</code> is equality supporting. The expression <code>e !in s</code> is a syntactic shorthand for <code>!(e in s)</code>.</p> <p>Expression <code>s[lo..hi]</code> yields a sequence formed by taking the first <code>hi</code> elements and then dropping the first <code>lo</code> elements. The resulting sequence thus has length <code>hi - lo</code>. Note that <code>s[0..|s|]</code> equals <code>s</code>. If the upper bound is omitted, it defaults to <code>|s|</code>, so <code>s[lo..]</code> yields the sequence formed by dropping the first <code>lo</code> elements of <code>s</code>. If the lower bound is omitted, it defaults to <code>0</code>, so <code>s[..hi]</code> yields the sequence formed by taking the first <code>hi</code> elements of <code>s</code>.</p> <p>In the sequence slice operation, <code>*slices*</code> is a nonempty list of length designators separated and optionally terminated by a colon, and there is at least one colon. Each length designator is a non-negative integer-based numeric, whose sum is no greater than <code>|s|</code>. If there are <em>k</em> colons, the operation produces <em>k</em> consecutive subsequences from <code>s</code>, each of the length indicated by the corresponding length designator, and returns these as a sequence of sequences.<a href="http://leino.science/papers/krml243.html#fn-fn-slice-into-tuple" target="_blank" rel="noopener noreferrer">1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> If <code>*slices*</code> is terminated by a colon, then the length of the last slice extends until the end of <code>s</code>, that is, its length is <code>|s|</code> minus the sum of the given length designators. For example, the following equalities hold, for any sequence <code>s</code> of length at least <code>10</code>:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var t := [3.14, 2.7, 1.41, 1985.44, 100.0, 37.2][1:0:3];
assert |t| == 3 &amp;&amp; t[0] == [3.14] &amp;&amp; t[1] == [];
assert t[2] == [2.7, 1.41, 1985.44];
var u := [true, false, false, true][1:1:];
assert |u| == 3 &amp;&amp; u[0][0] &amp;&amp; !u[1][0] &amp;&amp; u[2] == [false, true];
assert s[10:][0] == s[..10];
assert s[10:][1] == s[10..];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>The operation <code>multiset(s)</code> yields the multiset of elements of sequence <code>s</code>. It is allowed in non-ghost contexts only if the element type <code>T</code> is equality supporting.</p> <h4 id="_2-2-0-strings"><a href="#_2-2-0-strings" class="header-anchor">#</a> 2.2.0. Strings</h4> <p>A special case of a sequence type is <code>seq〈char〉</code>, for which Dafny provides a synonym: <code>string</code>. Strings are like other sequences, but provide additional syntax for sequence display expressions, namely <em>string literals</em>. There are two forms of the syntax for string literals: the <em>standard form</em> and the <em>verbatim form</em>.</p> <p>String literals of the standard form are enclosed in double quotes, as in <code>&quot;Dafny&quot;</code>. To include a double quote in such a string literal, it is necessary to use an escape sequence. Escape sequences can also be used to include other characters. The supported escape sequences are the same as those for character literals, see Section <a href="http://leino.science/papers/krml243.html#sec-char" target="_blank" rel="noopener noreferrer">0.2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. For example, the Dafny expression <code>&quot;say \&quot;yes\&quot;&quot;</code> represents the string say &quot;yes&quot;. The escape sequence for a single quote is redundant, because &quot;'&quot; and &quot;'&quot; denote the same string—both forms are provided in order to support the same escape sequences as for character literals.</p> <p>String literals of the verbatim form are bracketed by @&quot; and &quot;, as in <code>@&quot;Dafny&quot;</code>. To include a double quote in such a string literal, it is necessary to use the escape sequence &quot;&quot;, that is, to write the character twice. In the verbatim form, there are no other escape sequences. Even characters like newline can be written inside the string literal (hence spanning more than one line in the program text).</p> <p>For example, the following three expressions denote the same string:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>&quot;C:\\tmp.txt&quot;
@&quot;C:\tmp.txt&quot;
['C', ':', '\\', 't', 'm', 'p', '.', 't', 'x', 't']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Since strings are sequences, the relational operators &lt; and <code>&lt;=</code> are defined on them. Note, however, that these operators still denote proper prefix and prefix, respectively, not some kind of alphabetic comparison as might be desireable, for example, when sorting strings.</p> <h3 id="_2-3-finite-and-infinite-maps"><a href="#_2-3-finite-and-infinite-maps" class="header-anchor">#</a> 2.3. Finite and Infinite Maps</h3> <p>For any types <code>T</code> and <code>U</code>, a value of type <code>map〈T,U〉</code> denotes a <em>(finite) map</em> from <code>T</code> to <code>U</code>. In other words, it is a look-up table indexed by <code>T</code>. The <em>domain</em> of the map is a finite set of <code>T</code> values that have associated <code>U</code> values. Since the keys in the domain are compared using equality in the type <code>T</code>, type <code>map〈T,U〉</code> can be used in a non-ghost context only if <code>T</code> is equality supporting.</p> <p>Similarly, for any types <code>T</code> and <code>U</code>, a value of type <code>imap〈T,U〉</code> denotes a <em>(possibly) infinite map</em>. In most regards, <code>imap〈T,U〉</code> is like <code>map〈T,U〉</code>, but a map of type <code>imap〈T,U〉</code> is allowed to have an infinite domain.</p> <p>A map can be formed using a <em>map display</em> expression, which is a possibly empty, ordered list of <em>maplets</em>, each maplet having the form <code>t := u</code> where <code>t</code> is an expression of type <code>T</code> and <code>u</code> is an expression of type <code>U</code>, enclosed in square brackets after the keyword <code>map</code>. To illustrate,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>map[]    map[20 := true, 3 := false, 20 := false]    map[a+b := c+d]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>are three examples of map displays. By using the keyword <code>imap</code> instead of <code>map</code>, the map produced will be of type <code>imap〈T,U〉</code> instead of <code>map〈T,U〉</code>. Note that an infinite map (<code>imap</code>) is allowed to have a finite domain, whereas a finite map (<code>map</code>) is not allowed to have an infinite domain. If the same key occurs more than once, only the last occurrence appears in the resulting map.<a href="http://leino.science/papers/krml243.html#fn-fn-map-display" target="_blank" rel="noopener noreferrer">2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> There is also a <em>map comprehension expression</em>, explained in a different part of the Dafny language reference.</p> <p>For any map <code>fm</code> of type <code>map〈T,U〉</code>, any map <code>m</code> of type <code>map〈T,U〉</code> or <code>imap〈T,U〉</code>, any expression <code>t</code> of type <code>T</code>, any expression <code>u</code> of type <code>U</code>, and any <code>d</code> in the domain of <code>m</code> (that is, satisfying <code>d in m</code>), maps support the following operations:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>expression</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td>|fm|</td> <td>map cardinality</td></tr> <tr><td><code>m[d]</code></td> <td>map selection</td></tr> <tr><td><code>m[t := u]</code></td> <td>map update</td></tr> <tr><td><code>t in m</code></td> <td>map domain membership</td></tr> <tr><td><code>t !in m</code></td> <td>map domain non-membership</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p><code>|fm|</code> denotes the number of mappings in <code>fm</code>, that is, the cardinality of the domain of <code>fm</code>. Note that the cardinality operator is not supported for infinite maps. Expression <code>m[d]</code> returns the <code>U</code> value that <code>m</code> associates with <code>d</code>. Expression <code>m[t := u]</code> is a map like <code>m</code>, except that the element at key <code>t</code> is <code>u</code>. The expression <code>t in m</code> says <code>t</code> is in the domain of <code>m</code> and <code>t !in m</code> is a syntactic shorthand for <code>!(t in m)</code>.<a href="http://leino.science/papers/krml243.html#fn-fn-map-membership" target="_blank" rel="noopener noreferrer">3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Here is a small example, where a map <code>cache</code> of type <code>map〈int,real〉</code> is used to cache computed values of Joule-Thomson coefficients for some fixed gas at a given temperature:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>if K in cache {  // check if temperature is in domain of cache
  coeff := cache[K];  // read result in cache
} else {
  coeff := ComputeJouleThomsonCoefficient(K);  // do expensive computation
  cache := cache[K := coeff];  // update the cache
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3-types-that-stand-for-other-types"><a href="#_3-types-that-stand-for-other-types" class="header-anchor">#</a> 3. Types that stand for other types</h2> <p>It is sometimes useful to know a type by several names or to treat a type abstractly.</p> <h3 id="_3-0-type-synonyms"><a href="#_3-0-type-synonyms" class="header-anchor">#</a> 3.0. Type synonyms</h3> <p>A <em>type synonym</em> declaration:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>type Y〈T〉 = G
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>declares <code>Y〈T〉</code> to be a synonym for the type <code>G</code>. Here, <code>T</code> is a nonempty list of type parameters (each of which is optionally designated with the suffix “<code>(==)</code>”), which can be used as free type variables in <code>G</code>. If the synonym has no type parameters, the “<code>〈T〉</code>” is dropped. In all cases, a type synonym is just a synonym. That is, there is never a difference, other than possibly in error messages produced, between <code>Y〈T〉</code> and <code>G</code>.</p> <p>For example, the names of the following type synonyms may improve the readability of a program:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>type Replacements〈T〉 = map〈T,T〉
type Vertex = int
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>As already described in Section <a href="http://leino.science/papers/krml243.html#sec-string" target="_blank" rel="noopener noreferrer">2.2.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <code>string</code> is a built-in type synonym for <code>seq〈char〉</code>, as if it would have been declared as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>type string = seq〈char〉
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-1-opaque-types"><a href="#_3-1-opaque-types" class="header-anchor">#</a> 3.1. Opaque types</h3> <p>A special case of a type synonym is one that is underspecified. Such a type is declared simply by:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>type Y〈T〉
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>It is a known as an <em>opaque type</em>. Its definition can be revealed in a refining module. To indicate that <code>Y</code> designates an equality-supporting type, “<code>(==)</code>” can be written immediately following the name “<code>Y</code>”.</p> <p>For example, the declarations</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>type T
function F(t: T): T
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>can be used to model an uninterpreted function <code>F</code> on some arbitrary type <code>T</code>. As another example,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>type Monad〈T〉
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>can be used abstractly to represent an arbitrary parameterized monad.</p> <h2 id="_4-datatypes"><a href="#_4-datatypes" class="header-anchor">#</a> 4. Datatypes</h2> <p>Dafny offers two kinds of algebraic datatypes, those defined inductively and those defined co-inductively. The salient property of every datatype is that each value of the type uniquely identifies one of the datatype's constructors and each constructor is injective in its parameters.</p> <h3 id="_4-0-inductive-datatypes"><a href="#_4-0-inductive-datatypes" class="header-anchor">#</a> 4.0. Inductive datatypes</h3> <p>The values of inductive datatypes can be seen as finite trees where the leaves are values of basic types, numeric types, reference types, co-inductive datatypes, or function types. Indeed, values of inductive datatypes can be compared using Dafny's well-founded &lt; ordering.</p> <p>An inductive datatype is declared as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>datatype D〈T〉 = Ctors
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>where <code>*Ctors*</code> is a nonempty <code>|</code>-separated list of <em>(datatype) constructors</em> for the datatype. Each constructor has the form:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>C(params)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>where <code>*params*</code> is a comma-delimited list of types, optionally preceded by a name for the parameter and a colon, and optionally preceded by the keyword <code>ghost</code>. If a constructor has no parameters, the parentheses after the constructor name can be omitted. If no constructor takes a parameter, the type is usually called an <em>enumeration</em>; for example:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>datatype Friends = Agnes | Agatha | Jermaine | Jack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>For every constructor <code>C</code>, Dafny defines a <em>discriminator</em> <code>C?</code>, which is a member that returns <code>true</code> if and only if the datatype value has been constructed using <code>C</code>. For every named parameter <code>p</code> of a constructor <code>C</code>, Dafny defines a <em>destructor</em> <code>p</code>, which is a member that returns the <code>p</code> parameter from the <code>C</code> call used to construct the datatype value; its use requires that <code>C?</code> holds. For example, for the standard <code>List</code> type</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>datatype List〈T〉 = Nil | Cons(head: T, tail: List〈T〉)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>the following holds:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>Cons(5, Nil).Cons? &amp;&amp; Cons(5, Nil).head == 5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note that the expression</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>Cons(5, Nil).tail.head
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>is not well-formed, since <code>Cons(5, Nil).tail</code> does not satisfy <code>Cons?</code>.</p> <p>The names of the destructors must be unique across all the constructors of the datatype. A constructor can have the same name as the enclosing datatype; this is especially useful for single-constructor datatypes, which are often called <em>record types</em>. For example, a record type for black-and-white pixels might be represented as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>datatype Pixel = Pixel(x: int, y: int, on: bool)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>To call a constructor, it is usually necessary only to mention the name of the constructor, but if this is ambiguous, it is always possible to qualify the name of constructor by the name of the datatype. For example, <code>Cons(5, Nil)</code> above can be written</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>List.Cons(5, List.Nil)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>As an alternative to calling a datatype constructor explicitly, a datatype value can be constructed as a change in one parameter from a given datatype value using the <em>datatype update</em> expression. For any <code>d</code> whose type is a datatype that includes a constructor <code>C</code> that has a parameter (destructor) named <code>f</code> of type <code>T</code>, and any expression <code>t</code> of type <code>T</code>,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>d[f := t]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>constructs a value like <code>d</code> but whose <code>f</code> parameter is <code>t</code>. The operation requires that <code>d</code> satisfies <code>C?</code>. For example, the following equality holds:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>Cons(4, Nil)[tail := Cons(3, Nil)] == Cons(4, Cons(3, Nil))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-1-tuple-types"><a href="#_4-1-tuple-types" class="header-anchor">#</a> 4.1. Tuple types</h3> <p>Dafny builds in record types that correspond to tuples and gives these a convenient special syntax, namely parentheses. For example, what might have been declared as:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>datatype Pair〈T,U〉 = Pair(0: T, 1: U)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Dafny provides as the type <code>(T, U)</code> and the constructor <code>(t, u)</code>, as if the datatype's name were “” and its type arguments are given in round parentheses, and as if the constructor name were “”. Note that the destructor names are <code>0</code> and <code>1</code>, which are legal identifier names for members. For example, showing the use of a tuple destructor, here is a property that holds of 2-tuples (that is, <em>pairs</em>):</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>(5, true).1 == true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Dafny declares <em>n</em>-tuples where <em>n</em> is 0 or 2 or up. There are no 1-tuples, since parentheses around a single type or a single value have no semantic meaning. The 0-tuple type, <code>()</code>, is often known as the <em>unit type</em> and its single value, also written <code>()</code>, is known as <em>unit</em>.</p> <h3 id="_4-2-co-inductive-datatypes"><a href="#_4-2-co-inductive-datatypes" class="header-anchor">#</a> 4.2. Co-inductive datatypes</h3> <p>Whereas Dafny insists that there is a way to construct every inductive datatype value from the ground up, Dafny also supports <em>co-inductive datatypes</em>, whose constructors are evaluated lazily and hence allows infinite structures. A co-inductive datatype is declared using the keyword <code>codatatype</code>; other than that, it is declared and used like an inductive datatype.</p> <p>For example,</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>codatatype IList〈T〉 = Nil | Cons(head: T, tail: IList〈T〉)
codatatype Stream〈T〉 = More(head: T, tail: Stream〈T〉)
codatatype Tree〈T〉 = Node(left: Tree〈T〉, value: T, right: Tree〈T〉)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>declare possibly infinite lists (that is, lists that can be either finite or infinite), infinite streams (that is, lists that are always infinite), and infinite binary trees (that is, trees where every branch goes on forever), respectively.</p> <h2 id="_5-reference-types"><a href="#_5-reference-types" class="header-anchor">#</a> 5. Reference types</h2> <p>Dafny offers a host of <em>reference types</em>. These represent <em>references</em> to objects allocated dynamically in the program heap. To access the members of an object, a reference to (that is, a <em>pointer</em> to or <em>object identity</em> of) the object is <em>dereferenced</em>.</p> <p>The special value <code>null</code> is part of every reference type.<a href="http://leino.science/papers/krml243.html#fn-fn-nullable" target="_blank" rel="noopener noreferrer">4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_5-0-classes"><a href="#_5-0-classes" class="header-anchor">#</a> 5.0. Classes</h3> <p>A <em>class</em> <code>C</code> is a reference type declared as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>class C〈T〉 extends J
{
  members
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>where the list of type parameters <code>T</code> is optional and so is “<code>extends J</code>”, which says that the class extends a trait <code>J</code>. The members of a class are <em>fields</em>, <em>functions</em>, and <em>methods</em>. These are accessed or invoked by dereferencing a reference to a <code>C</code> instance. A function or method is invoked on an <em>instance</em> of <code>C</code>, unless the function or method is declared <code>static</code>. Mechanically, this just means the method takes an implicit <em>receiver</em> parameter, namely, the instance used to access the member. In the specification and body of an instance function or method, the receiver parameter can be referred to explicitly by the keyword <code>this</code>. However, in such places, members of <code>this</code> can also be mentioned without any qualification. To illustrate, the qualified <code>this.f</code> and the unqualified <code>f</code> refer to the same field of the same object in the following example:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>class C {
  var f: int;
  method Example() returns (b: bool)
  {
    b := f == this.f;
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>so the method body always assigns <code>true</code> to the out-parameter <code>b</code>. There is no semantic difference between qualified and unqualified accesses to the same receiver and member.</p> <p>A <code>C</code> instance is created using <code>new</code>, for example:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>c := new C;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note that <code>new</code> simply allocates a <code>C</code> object and returns a reference to it; the initial values of its fields are arbitrary values of their respective types. Therefore, it is common to invoke a method, known as an <em>initialization method</em>, immediately after creation, for example:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>c := new C;
c.InitFromList(xs, 3);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>When an initialization method has no out-parameters and modifies no more than <code>this</code>, then the two statements above can be combined into one:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>c := new C.InitFromList(xs, 3);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note that a class can contain several initialization methods, that these methods can be invoked at any time, not just as part of a <code>new</code>, and that <code>new</code> does not require that an initialization method be invoked at creation.</p> <p>To write structured object-oriented programs, one often relies on that objects are constructed only in certain ways. For this purpose, Dafny provides <em>constructor (method)s</em>, which are a restricted form of initialization methods. A constructor is declared with the keyword <code>constructor</code> instead of <code>method</code>. When a class contains a constructor, every call to <code>new</code> for that class must be accompanied with a call to one of the constructors. Moreover, a constructor cannot be called at other times, only during object creation. Other than these restrictions, there is no semantic difference between using ordinary initialization methods and using constructors.</p> <p>The Dafny design allows the constructors to be named, which promotes using names like <code>InitFromList</code> above. Still, many classes have just one constructor or have a typical constructor. Therefore, Dafny allows one <em>anonymous constructor</em>, that is, a constructor whose name is essentially “”. For example:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>class Item {
  constructor (x: int, y: int)
  // ...
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>When invoking this constructor, the “<code>.</code>” is dropped, as in:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>m := new Item(45, 29);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note that an anonymous constructor is just one way to name a constructor; there can be other constructors as well.</p> <h3 id="_5-1-arrays"><a href="#_5-1-arrays" class="header-anchor">#</a> 5.1. Arrays</h3> <p>Dafny supports mutable fixed-length <em>array types</em> of any positive dimension. Array types are reference types.</p> <h4 id="_5-1-0-one-dimensional-arrays"><a href="#_5-1-0-one-dimensional-arrays" class="header-anchor">#</a> 5.1.0. One-dimensional arrays</h4> <p>A one-dimensional array of <code>n</code> <code>T</code> elements is created as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>a := new T[n];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The initial values of the array elements are arbitrary values of type <code>T</code>. The length of an array is retrieved using the immutable <code>Length</code> member. For example, the array allocated above satisfies:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>a.Length == n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>For any integer-based numeric <code>i</code> in the range <code>0 &lt;= i &lt; a.Length</code>, the <em>array selection</em> expression <code>a[i]</code> retrieves element <code>i</code> (that is, the element preceded by <code>i</code> elements in the array). The element stored at <code>i</code> can be changed to a value <code>t</code> using the array update statement:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>a[i] := t;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Caveat: The type of the array created by <code>new T[n]</code> is <code>array〈T〉</code>. A mistake that is simple to make and that can lead to befuddlement is to write <code>array〈T〉</code> instead of <code>T</code> after <code>new</code>. For example, consider the following:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var a := new array〈T〉;
var b := new array〈T〉[n];
var c := new array〈T〉(n);  // resolution error
var d := new array(n);  // resolution error
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The first statement allocates an array of type <code>array〈T〉</code>, but of unknown length. The second allocates an array of type <code>array〈array〈T〉〉</code> of length <code>n</code>, that is, an array that holds <code>n</code> values of type <code>array〈T〉</code>. The third statement allocates an array of type <code>array〈T〉</code> and then attempts to invoke an anonymous constructor on this array, passing argument <code>n</code>. Since <code>array</code> has no constructors, let alone an anonymous constructor, this statement gives rise to an error. If the type-parameter list is omitted for a type that expects type parameters, Dafny will attempt to fill these in, so as long as the <code>array</code> type parameter can be inferred, it is okay to leave off the “<code>〈T〉</code>” in the fourth statement above. However, as with the third statement, <code>array</code> has no anonymous constructor, so an error message is generated.</p> <p>One-dimensional arrays support operations that convert a stretch of consecutive elements into a sequence. For any array <code>a</code> of type <code>array〈T〉</code>, integer-based numerics <code>lo</code> and <code>hi</code> satisfying <code>0 &lt;= lo &lt;= hi &lt;= a.Length</code>, the following operations each yields a <code>seq〈T〉</code>:</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>expression</td> <td>description</td></tr> <tr><td></td> <td></td></tr> <tr><td><code>a[lo..hi]</code></td> <td>subarray conversion to sequence</td></tr> <tr><td><code>a[lo..]</code></td> <td>drop</td></tr> <tr><td><code>a[..hi]</code></td> <td>take</td></tr> <tr><td><code>a[..]</code></td> <td>array conversion to sequence</td></tr> <tr><td></td> <td></td></tr></tbody></table> <p>The expression <code>a[lo..hi]</code> takes the first <code>hi</code> elements of the array, then drops the first <code>lo</code> elements thereof and returns what remains as a sequence. The resulting sequence thus has length <code>hi - lo</code>. The other operations are special instances of the first. If <code>lo</code> is omitted, it defaults to <code>0</code> and if <code>hi</code> is omitted, it defaults to <code>a.Length</code>. In the last operation, both <code>lo</code> and <code>hi</code> have been omitted, thus <code>a[..]</code> returns the sequence consisting of all the array elements of <code>a</code>.</p> <p>The subarray operations are especially useful in specifications. For example, the loop invariant of a binary search algorithm that uses variables <code>lo</code> and <code>hi</code> to delimit the subarray where the search <code>key</code> may be still found can be expressed as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>key !in a[..lo] &amp;&amp; key !in a[hi..]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Another use is to say that a certain range of array elements have not been changed since the beginning of a method:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>a[lo..hi] == old(a[lo..hi])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>or since the beginning of a loop:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>ghost var prevElements := a[..];
while // ...
  invariant a[lo..hi] == prevElements[lo..hi];
{
  // ...
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Note that the type of <code>prevElements</code> in this example is <code>seq〈T〉</code>, if <code>a</code> has type <code>array〈T〉</code>.</p> <p>A final example of the subarray operation lies in expressing that an array's elements are a permutation of the array's elements at the beginning of a method, as would be done in most sorting algorithms. Here, the subarray operation is combined with the sequence-to-multiset conversion:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>multiset(a[..]) == multiset(old(a[..]))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_5-1-1-multi-dimensional-arrays"><a href="#_5-1-1-multi-dimensional-arrays" class="header-anchor">#</a> 5.1.1. Multi-dimensional arrays</h4> <p>An array of 2 or more dimensions is mostly like a one-dimensional array, except that <code>new</code> takes more length arguments (one for each dimension), and the array selection expression and the array update statement take more indices. For example:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>matrix := new T[m, n];
matrix[i, j], matrix[x, y] := matrix[x, y], matrix[i, j];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>create a 2-dimensional array whose dimensions have lengths <code>m</code> and <code>n</code>, respectively, and then swaps the elements at <code>i,j</code> and <code>x,y</code>. The type of <code>matrix</code> is <code>array2〈T〉</code>, and similarly for higher-dimensional arrays (<code>array3〈T〉</code>, <code>array4〈T〉</code>, etc.). Note, however, that there is no type <code>array0〈T〉</code>, and what could have been <code>array1〈T〉</code> is actually named just <code>array〈T〉</code>.</p> <p>The <code>new</code> operation above requires <code>m</code> and <code>n</code> to be non-negative integer-based numerics. These lengths can be retrieved using the immutable fields <code>Length0</code> and <code>Length1</code>. For example, the following holds of the array created above:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>matrix.Length0 == m &amp;&amp; matrix.Length1 == n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Higher-dimensional arrays are similar (<code>Length0</code>, <code>Length1</code>, <code>Length2</code>, …). The array selection expression and array update statement require that the indices are in bounds. For example, the swap statement above is well-formed only if:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>0 &lt;= i &lt; matrix.Length0 &amp;&amp; 0 &lt;= j &lt; matrix.Length1 &amp;&amp;
0 &lt;= x &lt; matrix.Length0 &amp;&amp; 0 &lt;= y &lt; matrix.Length1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>In contrast to one-dimensional arrays, there is no operation to convert stretches of elements from a multi-dimensional array to a sequence.</p> <h3 id="_5-2-traits"><a href="#_5-2-traits" class="header-anchor">#</a> 5.2. Traits</h3> <p>A <em>trait</em> is an “abstract superclass”, or call it an “interface” or “mixin”. Traits are new to Dafny and are likely to evolve for a while.</p> <p>The declaration of a trait is much like that of a class:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>trait J
{
  members
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>where <code>*members*</code> can include fields, functions, and methods, but no constructor methods. The functions and methods are allowed to be declared <code>static</code>.</p> <p>A reference type <code>C</code> that extends a trait <code>J</code> is assignable to <code>J</code>, but not the other way around. The members of <code>J</code> are available as members of <code>C</code>. A member in <code>J</code> is not allowed to be redeclared in <code>C</code>, except if the member is a non-<code>static</code> function or method without a body in <code>J</code>. By doing so, type <code>C</code> can supply a stronger specification and a body for the member.</p> <p><code>new</code> is not allowed to be used with traits. Therefore, there is no object whose allocated type is a trait. But there can of course be objects of a class <code>C</code> that implements a trait <code>J</code>, and a reference to such a <code>C</code> object can be used as a value of type <code>J</code>.</p> <p>As an example, the following trait represents movable geometric shapes:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>trait Shape
{
  function method Width(): real
    reads this
  method Move(dx: real, dy: real)
    modifies this
  method MoveH(dx: real)
    modifies this
  {
    Move(dx, 0.0);
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Members <code>Width</code> and <code>Move</code> are <em>abstract</em> (that is, body less) and can be implemented differently by different classes that extend the trait. The implementation of method <code>MoveH</code> is given in the trait and thus gets used by all classes that extend <code>Shape</code>. Here are two classes that each extends <code>Shape</code>:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>class UnitSquare extends Shape
{
  var x: real, y: real;
  function method Width(): real {  // note the empty reads clause
    1.0
  }
  method Move(dx: real, dy: real)
    modifies this
  {
    x, y := x + dx, y + dy;
  }
}
class LowerRightTriangle extends Shape
{
  var xNW: real, yNW: real, xSE: real, ySE: real;
  function method Width(): real
    reads this
  {
    xSE - xNW
  }
  method Move(dx: real, dy: real)
    modifies this
  {
    xNW, yNW, xSE, ySE := xNW + dx, yNW + dy, xSE + dx, ySE + dy;
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>Note that the classes can declare additional members, that they supply implementations for the abstract members of the trait, that they repeat the member signatures, and that they are responsible for providing their own member specifications that both strengthen the corresponding specification in the trait and are satisfied by the provided body. Finally, here is some code that creates two class instances and uses them together as shapes:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var myShapes: seq〈Shape〉;
var A := new UnitSquare;
myShapes := [A];
var tri := new LowerRightTriangle;
myShapes := myShapes + [tri];  // myShapes contains two Shape values, of different classes
myShapes[1].MoveH(myShapes[0].Width());  // move shape 1 to the right by the width of shape 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-3-type-object"><a href="#_5-3-type-object" class="header-anchor">#</a> 5.3. Type <code>object</code></h3> <p>There is a built-in reference type <code>object</code> that is like a supertype of all reference types.<a href="http://leino.science/papers/krml243.html#fn-fn-object-trait" target="_blank" rel="noopener noreferrer">5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> The purpose of type <code>object</code> is to enable a uniform treatment of <em>dynamic frames</em>. In particular, it is useful to keep a ghost field (typically named <code>Repr</code> for “representation”) of type <code>set〈object〉</code>.</p> <h3 id="_5-4-iterator-types"><a href="#_5-4-iterator-types" class="header-anchor">#</a> 5.4. Iterator types</h3> <p>An <em>iterator</em> provides a programming abstraction for writing code that iteratively returns elements. These CLU-style iterators are <em>co-routines</em> in the sense that they keep track of their own program counter and control can be transferred into and out of the iterator body.</p> <p>An iterator is declared as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>iterator Iter〈T〉(in-params) yields (yield-params)
  specification
{
  body
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>where <code>T</code> is a list of type parameters (as usual, if there are no type parameters, “<code>〈T〉</code>” is omitted). This declaration gives rise to a reference type with the same name, <code>Iter〈T〉</code>. In the signature, in-parameters and yield-parameters are the iterator's analog of a method's in-parameters and out-parameters. The difference is that the out-parameters of a method are returned to a caller just once, whereas the yield-parameters of an iterator are returned each time the iterator body performs a <code>yield</code>. The details of the specification are described in a different part of the Dafny language reference. The body consists of statements, like in a method body, but with the availability also of <code>yield</code> statements.</p> <p>From the perspective of an iterator client, the <code>iterator</code> declaration can be understood as generating a class <code>Iter〈T〉</code> with various members, a simplified version of which is described next.</p> <p>The <code>Iter〈T〉</code> class contains an anonymous constructor whose parameters are the iterator's in-parameters:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>predicate Valid()
constructor (in-params)
  modifies this
  ensures Valid()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>An iterator is created using <code>new</code> and this anonymous constructor. For example, an iterator willing to return ten consecutive integers from <code>start</code> can be declared as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>iterator Gen(start: int) yields (x: int)
{
  var i := 0;
  while i &lt; 10 {
    x := start + i;
    yield;
    i := i + 1;
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>An instance of this iterator is created using:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>iter := new Gen(30);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The predicate <code>Valid()</code> says when the iterator is in a state where one can attempt to compute more elements. It is a postcondition of the constructor and occurs in the specification of the <code>MoveNext</code> member:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>method MoveNext() returns (more: bool)
  requires Valid()
  modifies this
  ensures more ==&gt; Valid()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Note that the iterator remains valid as long as <code>MoveNext</code> returns <code>true</code>. Once <code>MoveNext</code> returns <code>false</code>, the <code>MoveNext</code> method can no longer be called. Note, the client is under no obligation to keep calling <code>MoveNext</code> until it returns <code>false</code>, and the body of the iterator is allowed to keep returning elements forever.</p> <p>The in-parameters of the iterator are stored in immutable fields of the iterator class. To illustrate in terms of the example above, the iterator class <code>Gen</code> contains the following field:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var start: int;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The yield-parameters also result in members of the iterator class:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var x: int;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>These fields are set by the <code>MoveNext</code> method. If <code>MoveNext</code> returns <code>true</code>, the latest yield values are available in these fields and the client can read them from there.</p> <p>To aid in writing specifications, the iterator class also contains ghost members that keep the history of values returned by <code>MoveNext</code>. The names of these ghost fields follow the names of the yield-parameters with an “<code>s</code>” appended to the name (to suggest plural). Name checking rules make sure these names do not give rise to ambiguities. The iterator class for <code>Gen</code> above thus contains:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>ghost var xs: seq〈int〉;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>These history fields are changed automatically by <code>MoveNext</code>, but are not assignable by user code.</p> <p>Finally, the iterator class contains some special fields for use in specifications. In particular, the iterator specification gets recorded in the following immutable fields:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>ghost var _reads: set〈object〉;
ghost var _modifies: set〈object〉;
ghost var _decreases0: T0;
ghost var _decreases1: T1;
// ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>where there is a <code>_decreases*i*: T*i*</code> field for each component of the iterator's <code>decreases</code> clause.<a href="http://leino.science/papers/krml243.html#fn-fn-iterator-field-names" target="_blank" rel="noopener noreferrer">6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> In addition, there is a field:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>ghost var _new: set〈object〉;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>to which any objects allocated on behalf of the iterator body get added. The iterator body is allowed to remove elements from the <code>_new</code> set, but cannot by assignment to <code>_new</code> add any elements.</p> <p>Note, in the precondition of the iterator, which is to hold upon construction of the iterator, the in-parameters are indeed in-parameters, not fields of <code>this</code>.</p> <h3 id="_5-5-async-task-types"><a href="#_5-5-async-task-types" class="header-anchor">#</a> 5.5. Async-task types</h3> <p>Another experimental feature in Dafny that is likely to undergo some evolution is <em>asynchronous methods</em>. When an asynchronous method is called, it does not return values for the out-parameters, but instead returns an instance of an <em>async-task type</em>. An asynchronous method declared in a class <code>C</code> with the following signature:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>async method AM〈T〉(in-params) returns (out-params)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>also gives rise to an async-task type <code>AM〈T〉</code> (outside the enclosing class, the name of the type needs the qualification <code>C.AM〈T〉</code>). The async-task type is a reference type and can be understood as a class with various members, a simplified version of which is described next.</p> <p>Each in-parameter <code>x</code> of type <code>X</code> of the asynchronous method gives rise to a immutable ghost field of the async-task type:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>ghost var x: X;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Each out-parameter <code>y</code> of type <code>Y</code> gives rise to a field</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var y: Y;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>These fields are changed automatically by the time the asynchronous method is successfully awaited, but are not assignable by user code.</p> <p>The async-task type also gets a number of special fields that are used to keep track of dependencies, outstanding tasks, newly allocated objects, etc. These fields will be described in more detail as the design of asynchronous methods evolves.</p> <h2 id="_6-function-types"><a href="#_6-function-types" class="header-anchor">#</a> 6. Function types</h2> <p>Functions are first-class values in Dafny. Function types have the form <code>(T) -&gt; U</code> where <code>T</code> is a comma-delimited list of types and <code>U</code> is a type. <code>T</code> is called the function's <em>domain type(s)</em> and <code>U</code> is its <em>range type</em>. For example, the type of a function</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>function F(x: int, b: bool): real
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>is <code>(int, bool) -&gt; real</code>. Parameters are not allowed to be ghost.</p> <p>To simplify the appearance of the basic case where a function's domain consist of a list of exactly one type, the parentheses around the domain type can be dropped in this case, as in <code>T -&gt; U</code>. This innocent simplification requires additional explanation in the case where that one type is a tuple type, since tuple types are also written with enclosing parentheses. If the function takes a single argument that is a tuple, an additional set of parentheses is needed. For example, the function</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>function G(pair: (int, bool)): real
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>has type <code>((int, bool)) -&gt; real</code>. Note the necessary double parentheses. Similarly, a function that takes no arguments is different from one that takes a 0-tuple as an argument. For instance, the functions</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>function NoArgs(): real
function Z(unit: ()): real
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>have types <code>() -&gt; real</code> and <code>(()) -&gt; real</code>, respectively.</p> <p>The function arrow, <code>-&gt;</code>, is right associative, so <code>A -&gt; B -&gt; C</code> means <code>A -&gt; (B -&gt; C)</code>. The other association requires explicit parentheses: <code>(A -&gt; B) -&gt; C</code>.</p> <p>Note that the receiver parameter of a named function is not part of the type. Rather, it is used when looking up the function and can then be thought of as being captured into the function definition. For example, suppose function <code>F</code> above is declared in a class <code>C</code> and that <code>c</code> references an object of type <code>C</code>; then, the following is type correct:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var f: (int, bool) -&gt; real := c.F;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>whereas it would have been incorrect to have written something like:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var f': (C, int, bool) -&gt; real := F;  // not correct
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Outside its type signature, each function value has three properties, described next.</p> <p>Every function implicitly takes the heap as an argument. No function ever depends on the <em>entire</em> heap, however. A property of the function is its declared upper bound on the set of heap locations it depends on for a given input. This lets the verifier figure out that certain heap modifications have no effect on the value returned by a certain function. For a function <code>f: T -&gt; U</code> and a value <code>t</code> of type <code>T</code>, the dependency set is denoted <code>f.reads(t)</code> and has type <code>set〈object〉</code>.</p> <p>The second property of functions stems from that every function is potentially <em>partial</em>. In other words, a property of a function is its <em>precondition</em>. For a function <code>f: T -&gt; U</code>, the precondition of <code>f</code> for a parameter value <code>t</code> of type <code>T</code> is denoted <code>f.requires(t)</code> and has type <code>bool</code>.</p> <p>The third property of a function is more obvious—the function's body. For a function <code>f: T -&gt; U</code>, the value that the function yields for an input <code>t</code> of type <code>T</code> is denoted <code>f(t)</code> and has type <code>U</code>.</p> <p>Note that <code>f.reads</code> and <code>f.requires</code> are themselves functions. Suppose <code>f</code> has type <code>T -&gt; U</code> and <code>t</code> has type <code>T</code>. Then, <code>f.reads</code> is a function of type <code>T -&gt; set〈object〉</code> whose <code>reads</code> and <code>requires</code> properties are:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>f.reads.reads(t) == f.reads(t)
f.reads.requires(t) == true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>f.requires</code> is a function of type <code>T -&gt; bool</code> whose <code>reads</code> and <code>requires</code> properties are:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>f.requires.reads(t) == f.reads(t)
f.requires.requires(t) == true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-0-lambda-expressions"><a href="#_6-0-lambda-expressions" class="header-anchor">#</a> 6.0. Lambda expressions</h3> <p>In addition to named functions, Dafny supports expressions that define functions. These are called <em>lambda (expression)s</em> (some languages know them as <em>anonymous functions</em>). A lambda expression has the form:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>(params) specification =&gt; body
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>where <code>*params*</code> is a comma-delimited list of parameter declarations, each of which has the form <code>x</code> or <code>x: T</code>. The type <code>T</code> of a parameter can be omitted when it can be inferred. If the identifier <code>x</code> is not needed, it can be replaced by “<code>_</code>”. If <code>*params*</code> consists of a single parameter <code>x</code> (or <code>_</code>) without an explicit type, then the parentheses can be dropped; for example, the function that returns the successor of a given integer can be written as the following lambda expression:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>x =&gt; x + 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The <code>*specification*</code> is a list of clauses <code>requires E</code> or <code>reads W</code>, where <code>E</code> is a boolean expression and <code>W</code> is a frame expression.</p> <p><code>*body*</code> is an expression that defines the function's return value. The body must be well-formed for all possible values of the parameters that satisfy the precondition (just like the bodies of named functions and methods). In some cases, this means it is necessary to write explicit <code>requires</code> and <code>reads</code> clauses. For example, the lambda expression</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>x requires x != 0 =&gt; 100 / x
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>would not be well-formed if the <code>requires</code> clause were omitted, because of the possibility of division-by-zero.</p> <p>In settings where functions cannot be partial and there are no restrictions on reading the heap, the <em>eta expansion</em> of a function <code>F: T -&gt; U</code> (that is, the wrapping of <code>F</code> inside a lambda expression in such a way that the lambda expression is equivalent to <code>F</code>) would be written <code>x =&gt; F(x)</code>. In Dafny, eta expansion must also account for the precondition and reads set of the function, so the eta expansion of <code>F</code> looks like:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>x requires F.requires(x) reads F.reads(x) =&gt; F(x)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_7-newtypes"><a href="#_7-newtypes" class="header-anchor">#</a> 7. Newtypes</h2> <p>A new numeric type can be declared with the <em>newtype</em> declaration<a href="http://leino.science/papers/krml243.html#fn-fn-newtype-name" target="_blank" rel="noopener noreferrer">7<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>newtype N = x: M | Q
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>where <code>M</code> is a numeric type and <code>Q</code> is a boolean expression that can use <code>x</code> as a free variable. If <code>M</code> is an integer-based numeric type, then so is <code>N</code>; if <code>M</code> is real-based, then so is <code>N</code>. If the type <code>M</code> can be inferred from <code>Q</code>, the “<code>: M</code>” can be omitted. If <code>Q</code> is just <code>true</code>, then the declaration can be given simply as:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>newtype N = M
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Type <code>M</code> is known as the <em>base type</em> of <code>N</code>.</p> <p>A newtype is a numeric type that supports the same operations as its base type. The newtype is distinct from and incompatible with other numeric types; in particular, it is not assignable to its base type without an explicit conversion. An important difference between the operations on a newtype and the operations on its base type is that the newtype operations are defined only if the result satisfies the predicate <code>Q</code>, and likewise for the literals of the newtype.<a href="http://leino.science/papers/krml243.html#fn-fn-newtype-design-question" target="_blank" rel="noopener noreferrer">8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>For example, suppose <code>lo</code> and <code>hi</code> are integer-based numerics that satisfy <code>0 &lt;= lo &lt;= hi</code> and consider the following code fragment:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var mid := (lo + hi) / 2;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If <code>lo</code> and <code>hi</code> have type <code>int</code>, then the code fragment is legal; in particular, it never overflows, since <code>int</code> has no upper bound. In contrast, if <code>lo</code> and <code>hi</code> are variables of a newtype <code>int32</code> declared as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>newtype int32 = x | -0x80000000 &lt;= x &lt; 0x80000000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>then the code fragment is erroneous, since the result of the addition may fail to satisfy the predicate in the definition of <code>int32</code>. The code fragment can be rewritten as</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var mid := lo + (hi - lo) / 2;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>in which case it is legal for both <code>int</code> and <code>int32</code>.</p> <p>Since a newtype is incompatible with its base type and since all results of the newtype's operations are members of the newtype, a compiler for Dafny is free to specialize the run-time representation of the newtype. For example, by scrutinizing the definition of <code>int32</code> above, a compiler may decide to store <code>int32</code> values using signed 32-bit integers in the target hardware.</p> <p>Note that the bound variable <code>x</code> in <code>Q</code> has type <code>M</code>, not <code>N</code>. nConsequently, it may not be possible to state <code>Q</code> about the <code>N</code> value. For example, consider the following type of 8-bit 2's complement integers:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>newtype int8 = x: int | -128 &lt;= x &lt; 128
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>and consider a variable <code>c</code> of type <code>int8</code>. The expression</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>-128 &lt;= c &lt; 128
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>is not well-defined, because the comparisons require each operand to have type <code>int8</code>, which means the literal <code>128</code> is checked to be of type <code>int8</code>, which it is not. A proper way to write this expression would be to use a conversion operation, described next, on <code>c</code> to convert it to the base type:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>-128 &lt;= int(c) &lt; 128
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>There is a restriction that the value <code>0</code> must be part of every newtype.<a href="http://leino.science/papers/krml243.html#fn-fn-newtype-zero" target="_blank" rel="noopener noreferrer">9<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_7-0-numeric-conversion-operations"><a href="#_7-0-numeric-conversion-operations" class="header-anchor">#</a> 7.0. Numeric conversion operations</h3> <p>For every numeric type <code>N</code>, there is a conversion function with the same name. It is a partial identity function. It is defined when the given value, which can be of any numeric type, is a member of the type converted to. When the conversion is from a real-based numeric type to an integer-based numeric type, the operation requires that the real-based argument has no fractional part. (To round a real-based numeric value down to the nearest integer, use the <code>.Trunc</code> member, see Section <a href="http://leino.science/papers/krml243.html#sec-numeric-types" target="_blank" rel="noopener noreferrer">0.1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.)</p> <p>To illustrate using the example from above, if <code>lo</code> and <code>hi</code> have type <code>int32</code>, then the code fragment can legally be written as follows:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var mid := (int(lo) + int(hi)) / 2;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>where the type of <code>mid</code> is inferred to be <code>int</code>. Since the result value of the division is a member of type <code>int32</code>, one can introduce yet another conversion operation to make the type of <code>mid</code> be <code>int32</code>:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>var mid := int32((int(lo) + int(hi)) / 2);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If the compiler does specialize the run-time representation for <code>int32</code>, then these statements come at the expense of two, respectively three, run-time conversions.</p> <h2 id="_8-subset-types"><a href="#_8-subset-types" class="header-anchor">#</a> 8. Subset types</h2> <p>A <em>subset type</em> is a restricted use of an existing type, called the <em>base type</em> of the subset type. A subset type is like a combined use of the base type and a predicate on the base type.</p> <p>An assignment from a subset type to its base type is always allowed. An assignment in the other direction, from the base type to a subset type, is allowed provided the value assigned does indeed satisfy the predicate of the subset type. (Note, in contrast, assignments between a newtype and its base type are never allowed, even if the value assigned is a value of the target type. For such assignments, an explicit conversion must be used, see Section <a href="http://leino.science/papers/krml243.html#sec-numeric-conversions" target="_blank" rel="noopener noreferrer">7.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.)</p> <p>Dafny supports one subset type, namely the built-in type <code>nat</code>, whose base type is <code>int</code>.<a href="http://leino.science/papers/krml243.html#fn-fn-more-subset-types" target="_blank" rel="noopener noreferrer">10<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Type <code>nat</code> designates the non-negative subrange of <code>int</code>. A simple example that puts subset type <code>nat</code> to good use is the standard Fibonacci function:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>function Fib(n: nat): nat
{
  if n &lt; 2 then n else Fib(n-2) + Fib(n-1)
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>An equivalent, but clumsy, formulation of this function (modulo the wording of any error messages produced at call sites) would be to use type <code>int</code> and to write the restricting predicate in pre- and postconditions:</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>function Fib(n: int): int
  requires 0 &lt;= n  // the function argument must be non-negative
  ensures 0 &lt;= Fib(n)  // the function result is non-negative
{
  if n &lt; 2 then n else Fib(n-2) + Fib(n-1)
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Type inference will never infer the type of a variable to be a subset type. It will instead infer the type to be the base type of the subset type. For example, the type of <code>x</code> in</p> <div class="language-dafny line-numbers-mode"><pre class="language-text"><code>forall x :: P(x)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>will be <code>int</code>, even if predicate <code>P</code> declares its argument to have type <code>nat</code>.</p> <h4 id="acknowledgments"><a href="#acknowledgments" class="header-anchor">#</a> Acknowledgments</h4> <p>This document has been improved as a result of helpful comments from Nadia Polikarpova and Paqui Lucio.</p> <hr> <p>0.Being equality-supporting is just one of many <em>modes</em> that one can imagine types in a rich type system to have. For example, other modes could include having a total order, being zero-initializable, and possibly being uninhabited. If Dafny were to support more modes in the future, the “<code>( )</code>”-suffix syntax may be extended. For now, the suffix can only indicate the equality-supporting mode. <a href="http://leino.science/papers/krml243.html#back-fn-fn-type-mode" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>1.Now that Dafny supports built-in tuples, the plan is to change the sequence slice operation to return not a sequence of subsequences, but a tuple of subsequences. <a href="http://leino.science/papers/krml243.html#back-fn-fn-slice-into-tuple" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>2.This is likely to change in the future to disallow multiple occurrences of the same key. <a href="http://leino.science/papers/krml243.html#back-fn-fn-map-display" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>3.This is likely to change in the future as follows: The <code>in</code> and <code>!in</code> operations will no longer be supported on maps. Instead, for any map <code>m</code>, <code>m.Domain</code> will return its domain as a set and <code>m.Range</code> will return, also as a set, the image of <code>m</code> under its domain. <a href="http://leino.science/papers/krml243.html#back-fn-fn-map-membership" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>4.This will change in a future version of Dafny that will support both nullable and (by default) non-null reference types. <a href="http://leino.science/papers/krml243.html#back-fn-fn-nullable" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>5.Soon, <code>object</code> will be made into a built-in trait rather than being a built-in special class. When this happens, it will no longer be possible to do <code>new object</code>. The current compiler restriction that <code>object</code> cannot be used as a type parameter will then also go away. <a href="http://leino.science/papers/krml243.html#back-fn-fn-object-trait" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>6.It would make sense to rename the special fields <code>_reads</code> and <code>_modifies</code> to have the same names as the corresponding keywords, <code>reads</code> and <code>modifies</code>, as is done for function values. Also, the various <code>_decreases*i*</code> fields can combined into one field named <code>decreases</code> whose type is a <em>n</em>-tuple.</p> <p><a href="http://leino.science/papers/krml243.html#back-fn-fn-iterator-field-names" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>7.Should <code>newtype</code> perhaps be renamed to <code>numtype</code>? <a href="http://leino.science/papers/krml243.html#back-fn-fn-newtype-name" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>8.Would it be useful to also automatically define <code>predicate N?(m: M) { Q }</code>? <a href="http://leino.science/papers/krml243.html#back-fn-fn-newtype-design-question" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>9.The restriction is due to a current limitation in the compiler. This will change in the future and will also open up the possibility for subset types and non-null reference types. <a href="http://leino.science/papers/krml243.html#back-fn-fn-newtype-zero" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>10.A future version of Dafny will support user-defined subset types. <a href="http://leino.science/papers/krml243.html#back-fn-fn-more-subset-types" target="_blank" rel="noopener noreferrer">↩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/aaron-clou/dafnycommunity/edit/master/docs/80.语言/20.detailed-document/00.Dafny type system.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/03/26, 14:38:56</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/dafnycommunity/pages/c80a4c/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Getting Started with Dafny A Guide</div></a> <a href="/dafnycommunity/pages/c0c2c7/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Style Guide for Dafny programs</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/dafnycommunity/pages/c80a4c/" class="prev">Getting Started with Dafny A Guide</a></span> <span class="next"><a href="/dafnycommunity/pages/c0c2c7/">Style Guide for Dafny programs</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/dafnycommunity/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/dafnycommunity/pages/0978ce/"><div>
            寻找最大和最小数
            <!----></div></a> <span class="date">04-06</span></dt></dl><dl><dd>02</dd> <dt><a href="/dafnycommunity/pages/e3e481/"><div>
            斐波那契数列
            <!----></div></a> <span class="date">04-06</span></dt></dl><dl><dd>03</dd> <dt><a href="/dafnycommunity/pages/02fdef/"><div>
            线性查询
            <!----></div></a> <span class="date">04-06</span></dt></dl> <dl><dd></dd> <dt><a href="/dafnycommunity/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/Aaron-clou/dafnycommunity" title="Github" target="_blank" class="iconfont icon-github-fill"></a><a href="https://gitee.com/leo214/dafnycommunity" title="Gitee" target="_blank" class="iconfont icon-gitee2"></a><a href="1374921025@qq.com" title="Email" target="_blank" class="iconfont icon-email-fill"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>Li Jiahai | Dafny Community | 2022</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><!----><div id="tcomment"></div><div></div></div></div>
    <script src="/dafnycommunity/assets/js/app.99d07194.js" defer></script><script src="/dafnycommunity/assets/js/2.ab4658c0.js" defer></script><script src="/dafnycommunity/assets/js/72.8252acc5.js" defer></script><script src="/dafnycommunity/assets/js/7.5451cfed.js" defer></script><script src="/dafnycommunity/assets/js/4.06497870.js" defer></script>
  </body>
</html>
