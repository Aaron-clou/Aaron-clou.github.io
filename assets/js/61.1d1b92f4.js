(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{547:function(s,a,n){"use strict";n.r(a);var e=n(18),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"é›†åˆå…ƒç´ ä¸Šçš„å‡½æ•°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é›†åˆå…ƒç´ ä¸Šçš„å‡½æ•°"}},[s._v("#")]),s._v(" é›†åˆå…ƒç´ ä¸Šçš„å‡½æ•°")]),s._v(" "),n("blockquote",[n("p",[n("em",[s._v("K. Rustan M. Leino Manuscript KRML 274, 16 February 2020")])])]),s._v(" "),n("p",[n("strong",[s._v("æ‘˜è¦")]),s._v(" åœ¨è‡ªç„¶è¯­è¨€ä¸­ï¼Œåƒâ€œä¸€ç»„æ•°å­—çš„å’Œâ€è¿™æ ·çš„çŸ­è¯­å¾ˆå®¹æ˜“è¯´å’Œç†è§£ã€‚åœ¨æ­£å¼è®¾ç½®ä¸­å®šä¹‰å’Œä½¿ç”¨è¿™äº›å‡½æ•°éœ€è¦æ›´å¤šçš„å·¥ä½œã€‚è¿™ä¸ªé—®é¢˜ä¸é€’å½’å®šä¹‰çš„å‡½æ•°å¦‚ä½•ä»é›†åˆä¸­é€‰å–ä¸‹ä¸€ä¸ªå…ƒç´ æœ‰å…³ã€‚æœ¬æ–‡æè¿°äº†ä¸€ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„ä¾‹å­ï¼Œå¹¶æè¿°äº†å¦‚ä½•ä½¿æ­£å¼çš„ç¹æ–‡ç¼›èŠ‚å‘æŒ¥ä½œç”¨ã€‚è¯¥è§£å¯åº”ç”¨äºé›†åˆä¸Šçš„ä»»ä½•äº¤æ¢è¿ç®—å’Œç»“åˆè¿ç®—ã€‚")]),s._v(" "),n("h2",{attrs:{id:"å¯¹é›†åˆçš„å…ƒç´ æ±‚å’Œ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹é›†åˆçš„å…ƒç´ æ±‚å’Œ"}},[s._v("#")]),s._v(" å¯¹é›†åˆçš„å…ƒç´ æ±‚å’Œ")]),s._v(" "),n("p",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿”å›é›†åˆä¸­æ‰€æœ‰æ•´æ•°çš„å’Œ:")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function Sum(s: set<int>): int\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("å¦‚æœæˆ‘ä»¬æŠŠä¸€ä¸ªå…ƒç´ yåŠ åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œæˆ‘ä»¬æœŸæœ›å®ƒçš„å’Œå¢åŠ yã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›æ­£ç¡®å®ç°ä»¥ä¸‹æ–¹æ³•:")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("method AddElement(s: set<int>, a: int, y: int) returns (t: set<int>, b: int)\n  requires a == Sum(s) && y !in s\n  ensures t == s + {x} && b == Sum(t)\n{\n  t := s + {y};\n  b := a + y;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("äº‹å®è¯æ˜ï¼Œè¯æ˜ä¸æ˜¯è‡ªåŠ¨çš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ç»†èŠ‚å¹¶å¡«å†™è¯æ˜ã€‚")]),s._v(" "),n("h2",{attrs:{id:"æ±‚å’Œçš„é€’å½’å®šä¹‰"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ±‚å’Œçš„é€’å½’å®šä¹‰"}},[s._v("#")]),s._v(" æ±‚å’Œçš„é€’å½’å®šä¹‰")]),s._v(" "),n("p",[s._v("å‡½æ•°â€œSumâ€æ˜¯é€’å½’å®šä¹‰çš„ã€‚ç©ºé›†åˆçš„å’Œä¸º"),n("code",[s._v("0")]),s._v("ã€‚å¦‚æœé›†åˆéç©ºï¼Œé€‰æ‹©å…¶ä¸­ä¸€ä¸ªå…ƒç´ ï¼Œæ¯”å¦‚"),n("code",[s._v("x")]),s._v("ã€‚ç„¶åï¼Œåœ¨é€’å½’è®¡ç®—çš„å‰©ä½™å…ƒç´ çš„å’Œä¸ŠåŠ ä¸Š"),n("code",[s._v("x")]),s._v("ã€‚")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function Sum(s: set<int>): int {\n  if s == {} then 0 else\n    var x := Pick(s);\n    x + Sum(s - {x})\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("è¿™ä¸ªå®šä¹‰ä½¿ç”¨äº†ä¸€ä¸ªå‡½æ•°"),n("code",[s._v("Pick")]),s._v("ï¼Œå®ƒè¿”å›ç»™å®šé›†åˆä¸­çš„ä»»æ„å…ƒç´ ã€‚ä»¥ä¸‹æ˜¯å®ƒçš„å®šä¹‰:")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function Pick(s: set<int>): int\n  requires s != {}\n{\n  var x :| x in s; x\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("æˆ‘å¾…ä¼šå†è®²Pickã€‚æ­¤æ—¶æ‚¨éœ€è¦äº†è§£çš„æ˜¯ï¼Œ"),n("code",[s._v("Pick")]),s._v("çš„è°ƒç”¨è€…æ— æ³•æ§åˆ¶è¿”å›"),n("code",[s._v("s")]),s._v("ä¸­çš„å“ªä¸ªå…ƒç´ ã€‚")]),s._v(" "),n("h2",{attrs:{id:"ä¸åˆæ ¼è¯æ˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸åˆæ ¼è¯æ˜"}},[s._v("#")]),s._v(" ä¸åˆæ ¼è¯æ˜")]),s._v(" "),n("p",[s._v("ä¸ºäº†è¯æ˜"),n("code",[s._v("AddElement")]),s._v("ï¼Œæˆ‘ä»¬éœ€è¦è¯æ˜"),n("code",[s._v("b == Sum(t)")]),s._v("åœ¨å®ƒçš„æœ€ç»ˆçŠ¶æ€æ˜¯æˆç«‹çš„ã€‚å›é¡¾ä½œä¸šï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å±•ç¤º")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("a + y == Sum(s + {y})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("åœ¨åˆå§‹çŠ¶æ€ã€‚ç”±äº"),n("code",[s._v("a")]),s._v("æ˜¯"),n("code",[s._v("Sum(s)")]),s._v("ï¼Œæˆ‘ä»¬çš„è¯æ˜ä¹‰åŠ¡å¯ä»¥å½’ç»“ä¸º")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Sum(s) + y == Sum(s + {y})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("æˆ‘ä»¬å·²çŸ¥yä¸åœ¨sä¸­ã€‚")]),s._v(" "),n("p",[s._v("å‡è®¾"),n("code",[s._v("Pick(s + {y})")]),s._v("è¿”å›"),n("code",[s._v("y")]),s._v("ã€‚ç„¶å,æˆ‘ä»¬æœ‰")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("  Sum(s + {y});\n==  // def. Sum\n  var x := Pick(s + {y}); x + Sum(s + {y} - {x});\n==  // using the assumption Pick(s + {y}) == y\n  y + Sum(s + {y} - {y});\n==  // sets, since y !in s\n  y + Sum(s);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("è¿™å¾ˆç®€å•ä¹Ÿå¾ˆç›´æ¥ã€‚ä½†å¯¹äºè¿™ä¸ªè¯æ˜ï¼Œæˆ‘ä»¬å‡è®¾å¯¹"),n("code",[s._v("Pick")]),s._v("çš„ç›¸å…³è°ƒç”¨è¿”å›äº†"),n("code",[s._v("y")]),s._v("ã€‚å¦‚æœ"),n("code",[s._v("Pick")]),s._v("è¿”å›ä¸"),n("code",[s._v("s")]),s._v("ä¸åŒçš„å…ƒç´ æ€ä¹ˆåŠ?")]),s._v(" "),n("h2",{attrs:{id:"é€‰æ‹©å…¶ä»–ä¸œè¥¿"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é€‰æ‹©å…¶ä»–ä¸œè¥¿"}},[s._v("#")]),s._v(" é€‰æ‹©å…¶ä»–ä¸œè¥¿")]),s._v(" "),n("p",[s._v("åœ¨ä½ æ„è¯†åˆ°â€œæŒ‘é€‰â€å¯ä»¥é€‰æ‹©ä¸€ä¸ªä¸åŒäºä½ æ‰€æƒ³çš„å…ƒç´ ä¹‹å‰ï¼Œä¹Œäº‘å¼€å§‹æ•£å»ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ªå¼•ç†ï¼Œå®ƒè¡¨æ˜é€‰æ‹©æ˜¯æ— å…³ç´§è¦çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼•ç†ä¼šè®©æˆ‘ä»¬æŠŠâ€œSumâ€çœ‹ä½œæ˜¯ï¼Œåœ¨åšé€’å½’è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬æŒ‡å®šçš„ä¸€ä¸ªå…ƒç´ ã€‚")]),s._v(" "),n("p",[s._v("è¿™å°±æ˜¯é‚£ä¸ªå¼•ç†ã€‚è¿™ä¸ªè¯æ˜ä¸€å¼€å§‹ä¹Ÿæœ‰ç‚¹æ£˜æ‰‹ã€‚å½’æ ¹åˆ°åº•å°±æ˜¯è®©â€œPickâ€é€‰æ‹©å®ƒæ‰€é€‰æ‹©çš„ä»»ä½•å…ƒç´ ï¼Œç„¶åå¯¹â€œSumâ€é€’å½’çš„æ›´å°çš„é›†åˆåº”ç”¨å½’çº³å‡è®¾ã€‚")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("lemma SumMyWay(s: set<int>, y: int)\n  requires y in s\n  ensures Sum(s) == y + Sum(s - {y})\n{\n  var x := Pick(s);\n  if y == x {\n  } else {\n    calc {\n      Sum(s);\n    ==  // def. Sum\n      x + Sum(s - {x});\n    ==  { SumMyWay(s - {x}, y); }\n      x + y + Sum(s - {x} - {y});\n    ==  { assert s - {x} - {y} == s - {y} - {x}; }\n      y + x + Sum(s - {y} - {x});\n    ==  { SumMyWay(s - {y}, x); }\n      y + Sum(s - {y});\n    }\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[s._v("æˆ‘è¯´è¿™ä¸ªå¼•ç†çœ‹èµ·æ¥åƒ"),n("code",[s._v("Sum")]),s._v("çš„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥"),n("code",[s._v("Sum")]),s._v("çš„ä¸¤ä¸ªå‚æ•°æ˜¯"),n("code",[s._v("s")]),s._v("å’Œ"),n("code",[s._v("s - {y}")]),s._v("ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨s + {y}å’Œsæ¥è°ƒç”¨"),n("code",[s._v("Sum")]),s._v("æ¥å£°æ˜è¯¥å±æ€§ã€‚è¿™ä¸ªé€‰æ‹©æ˜¯ä¸Šè¿°å¼•ç†çš„ä¸€ä¸ªç®€å•æ¨è®º:")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("lemma AddToSum(s: set<int>, y: int)\n  requires y !in s\n  ensures Sum(s + {y}) == Sum(s) + y\n{\n  SumMyWay(s + {y}, y);\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("ä½¿ç”¨å¼•ç†")]),s._v(" "),n("p",[s._v("æœ‰äº†è¿™ä¸ªæœ‰ç”¨çš„å¼•ç†ï¼Œå°±å¾ˆå®¹æ˜“å¾—åˆ°â€œAddElementâ€çš„è¯æ˜:å°†å…¶ä¸»ä½“æ›´æ”¹ä¸º")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("t := s + {y};\nb := a + y;\nAddToSum(s, y);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"å†…è”é€‰æ‹©"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å†…è”é€‰æ‹©"}},[s._v("#")]),s._v(" å†…è”é€‰æ‹©")]),s._v(" "),n("p",[s._v("åœ¨ä¸Šé¢çš„å¼€å‘ä¸­ï¼Œæˆ‘å°†â€˜Pickâ€™å®šä¹‰ä¸ºä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ã€‚é˜…è¯»ç¨‹åºæ–‡æœ¬ä¸­çš„å•è¯â€œpickâ€å¯èƒ½æœ‰åŠ©äºç†è§£â€œSumâ€å’Œâ€œSumMyWayâ€åšä»€ä¹ˆã€‚ä½†å®ƒæ˜¯ä¸€ä¸ªå¦‚æ­¤å°çš„å‡½æ•°ï¼Œæ‰€ä»¥ä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨ä½¿ç”¨å®ƒçš„ä¸¤ä¸ªåœ°æ–¹å†…è”å®ƒå‘¢ã€‚è®©æˆ‘ä»¬è¯•ä¸€è¯•:")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function Sum(s: set<int>): int {\n  if s == {} then 0 else\n    var x :| x in s;  // this line takes the place of a call to Pick\n    x + Sum(s - {x})\n}\n\nlemma SumMyWay(s: set<int>, y: int)\n  requires y in s\n  ensures Sum(s) == y + Sum(s - {y})\n{\n  var x :| x in s;  // this line takes the place of a call to Pick\n  if y == x {  // error: postcondition might not hold on this path\n  } else {\n    calc {\n      Sum(s);\n    ==  // def. Sum        // error: this step might not hold\n      x + Sum(s - {x});\n    ==  { SumMyWay(s - {x}, y); }\n      x + y + Sum(s - {x} - {y});\n    ==  { assert s - {x} - {y} == s - {y} - {x}; }\n      y + x + Sum(s - {y} - {x});\n    ==  { SumMyWay(s - {y}, x); }\n      y + Sum(s - {y});\n    }\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("ç°åœ¨æˆ‘ä»¬å¾—åˆ°ä¸¤ä¸ªé”™è¯¯!")]),s._v(" "),n("p",[s._v("ä¸ºäº†è§£é‡Šå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè®©æˆ‘å¤šè¯´ä¸€ç‚¹å…³äº"),n("code",[s._v(":|")]),s._v("ä»¥åŠå®ƒçš„ä¸åŒå¯»å¸¸ä¹‹å¤„ã€‚")]),s._v(" "),n("h2",{attrs:{id:"let-such-that"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#let-such-that"}},[s._v("#")]),s._v(" Let such that")]),s._v(" "),n("p",[s._v("Dafnyä¸­çš„let-such-thatç»“æ„æœ‰è¿™æ ·ä¸€ç§å½¢å¼")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("var x :| P; E\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("å®ƒçš„è®¡ç®—ç»“æœæ˜¯"),n("code",[s._v("E")]),s._v("ï¼Œå…¶ä¸­"),n("code",[s._v("x")]),s._v("è¢«ç»‘å®šåˆ°æŸä¸ªæ»¡è¶³"),n("code",[s._v("P")]),s._v("çš„å€¼ã€‚ä¾‹å¦‚,")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("var x :| 7 <= x < 10; 2 * x\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("è®¡ç®—ç»“æœä¸ºâ€œ14â€ã€â€œ16â€æˆ–â€œ18â€ã€‚ä½œä¸ºç¨‹åºå‘˜ï¼Œä½ æ— æ³•æ§åˆ¶é€‰æ‹©"),n("code",[s._v("x")]),s._v("çš„å“ªä¸ªå€¼ã€‚ä½†ä½ ä¼šçŸ¥é“ä¸¤ä»¶é‡è¦çš„äº‹ã€‚ä¸€æ˜¯xå°†è¢«é€‰ä¸ºæ»¡è¶³Pçš„å€¼ã€‚(å¦‚æœDafnyéªŒè¯å™¨ä¸èƒ½è¯æ˜è¿™æ ·çš„å€¼å­˜åœ¨ï¼Œåˆ™ä¼šç»™å‡ºä¸€ä¸ªé”™è¯¯ã€‚)å¦ä¸€ç§æ–¹æ³•æ˜¯ï¼Œæ¯æ¬¡ä½¿ç”¨ç›¸åŒçš„è¾“å…¥å¯¹è¡¨è¾¾å¼æ±‚å€¼æ—¶ï¼Œéƒ½å°†å¾—åˆ°ç›¸åŒçš„å€¼ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªç®—å­æ˜¯ç¡®å®šæ€§çš„ã€‚")]),s._v(" "),n("p",[s._v("ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå…³äºå†³å®šè®ºçš„ä¾‹å­:")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("var x :| x in {2, 3, 5}; x\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("è¿™ä¸ªè¡¨è¾¾å¼é€‰æ‹©"),n("code",[s._v("x")]),s._v("ä¸ºæœ€å°çš„ä¸‰ä¸ªç´ æ•°ä¹‹ä¸€("),n("code",[s._v("2")]),s._v("ã€"),n("code",[s._v("3")]),s._v("æˆ–"),n("code",[s._v("5")]),s._v(")ï¼Œç„¶åè¿”å›å®ƒã€‚æ‚¨ä¸çŸ¥é“æ‚¨å¾—åˆ°çš„æ˜¯è¿™ä¸‰ä¸ªå€¼ä¸­çš„å“ªä¸€ä¸ªï¼Œä½†æ‚¨å¯ä»¥ä¿è¯æ¯æ¬¡åœ¨ç¨‹åºçš„ä¸€æ¬¡è¿è¡Œä¸­è®¡ç®—è¿™ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œæ‚¨å°†å¾—åˆ°ç›¸åŒçš„å€¼ã€‚")]),s._v(" "),n("p",[s._v("è®©æˆ‘ä»¬æ›´å‡†ç¡®åœ°ç†è§£æˆ‘æ‰€è¯´çš„â€œè¿™ä¸ªè¡¨è¾¾â€ã€‚åœ¨Dafnyä¸­ï¼Œlet-such-thatè¡¨è¾¾å¼çš„æ¯ä¸€ä¸ªâ€œæ–‡æœ¬å‡ºç°â€éƒ½å¯ä»¥åšå‡ºè‡ªå·±çš„é€‰æ‹©ã€‚è€ƒè™‘è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯éå†ç¨‹åºçš„æ–‡æœ¬ï¼Œå¹¶ç”¨å”¯ä¸€çš„é¢œè‰²ä¸ºæ¯ä¸ª"),n("code",[s._v(":|")]),s._v("æ“ä½œç¬¦ç€è‰²ã€‚ç„¶åï¼Œä½ å¯ä»¥ä¾èµ–äºç›¸åŒçš„é€‰é¡¹ï¼Œåªæœ‰å½“å®ƒä»¬ç”±ç›¸åŒé¢œè‰²çš„"),n("code",[s._v(":|")]),s._v("æ‰§è¡Œæ—¶ã€‚")]),s._v(" "),n("p",[s._v("è¿™é‡Œæœ‰ä¸€ä¸ªè¯´æ˜æ€§çš„ä¾‹å­ã€‚")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("lemma Choices(s: set<int>)\n  requires s != {}\n{\n  var a := Pick(s);\n  var b := Pick(s);\n  assert a == b;  // this is provable\n  a := var x :| x in s; x;\n  b := var x :| x in s; x;\n  assert a == b;  // error: not provable\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("èµ‹ç»™"),n("code",[s._v("a")]),s._v("å’Œ"),n("code",[s._v("b")]),s._v("çš„ç¬¬ä¸€ä¸ªå€¼æ¥è‡ªç›¸åŒçš„"),n("code",[s._v(":|")]),s._v("æ“ä½œç¬¦ã€‚å®ƒä»¬æ˜¯ç›¸åŒé¢œè‰²é€‰æ‹©çš„ç»“æœã€‚å› æ­¤ï¼Œå®ƒä»¬è¢«è®¤ä¸ºæ˜¯ç›¸åŒçš„ã€‚ç›¸åï¼Œèµ‹ç»™"),n("code",[s._v("a")]),s._v("å’Œ"),n("code",[s._v("b")]),s._v("çš„ä¸‹ä¸€ä¸ªå€¼æ¥è‡ªä¸åŒçš„"),n("code",[s._v(":|")]),s._v("æ“ä½œç¬¦â€”â€”ä¸åŒé¢œè‰²çš„æ“ä½œç¬¦ã€‚å› æ­¤ï¼Œæ‚¨ä¸èƒ½ç¡®å®šâ€˜aâ€™å’Œâ€˜bâ€™æ˜¯ç›¸ç­‰çš„ã€‚")]),s._v(" "),n("p",[s._v("å®é™…ä¸Šï¼Œå¦‚æœä½ å¤šæƒ³ä¸€ç‚¹(æˆ–è€…å°‘æƒ³ä¸€ç‚¹)ï¼Œä½ å°±ä¼šæ„è¯†åˆ°ï¼Œæˆ‘ä»¬çŸ¥é“èµ‹ç»™"),n("code",[s._v("a")]),s._v("å’Œ"),n("code",[s._v("b")]),s._v("çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯ç›¸ç­‰çš„ï¼Œå³ä½¿ä¸çŸ¥é“"),n("code",[s._v("Pick")]),s._v("çš„ä»»ä½•å†…å®¹ã€‚æ¯•ç«Ÿï¼Œ"),n("code",[s._v("Pick")]),s._v("æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœä½ å¯¹ç›¸åŒçš„å‚æ•°è°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¸¤æ¬¡ï¼Œå®ƒä¼šè¿”å›ç›¸åŒçš„å€¼ã€‚æ•°å­¦ä¿è¯äº†è¿™ä¸€ç‚¹ï¼ŒDafnyä¹Ÿæ˜¯å¦‚æ­¤ã€‚é‚£ä¹ˆï¼Œå¯¹aå’Œbçš„ç¬¬äºŒä¸ªèµ‹å€¼å‘¢;é‚£äº›è¡¨è¾¾å¼ä¸­çš„"),n("code",[s._v(":|")]),s._v("æ“ä½œç¬¦ä¸ä¹Ÿæ˜¯å‡½æ•°å—?æ˜¯çš„ï¼Œå®ƒä»¬æ˜¯ï¼Œä½†å®ƒä»¬æ˜¯ä¸åŒçš„åŠŸèƒ½ã€‚å®ƒä»¬æ˜¯ä¸åŒé¢œè‰²çš„å‡½æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚åªè¦ä½ æŠŠç¨‹åºä¸­å‡ºç°çš„æ¯ä¸€ä¸ª"),n("code",[s._v(":|")]),s._v("çœ‹ä½œæ˜¯ä¸€ä¸ª"),n("em",[s._v("ä¸åŒçš„")]),s._v("å‡½æ•°ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æ•°å­¦è¿ç®—å°±ä¼šå¦‚ä½ æ‰€æœŸæœ›çš„é‚£æ ·ã€‚")]),s._v(" "),n("p",[s._v("è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘å¯ä»¥æ›´å®¹æ˜“åœ°æè¿°â€œSumâ€çš„æƒ…å†µï¼Œå¦‚æœæˆ‘å¯ä»¥ä½¿ç”¨ä¸€ä¸ªâ€œğŸ˜â€ã€‚ä¸ºäº†é‡ç”¨ç›¸åŒçš„"),n("code",[s._v(":|")]),s._v("ï¼Œæˆ‘æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œæˆ‘å‘½åä¸º"),n("code",[s._v("Pick")]),s._v("ã€‚æˆ‘å»ºè®®ä½ åšåŒæ ·çš„äº‹æƒ…å¦‚æœä½ åœ¨å¤„ç†æ¶‰åŠåˆ°ä½ æƒ³è¦è¯æ˜å±æ€§çš„é€‰æ‹©çš„å¹½çµå‡½æ•°ã€‚")]),s._v(" "),n("h2",{attrs:{id:"å¤šç§é€‰æ‹©"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¤šç§é€‰æ‹©"}},[s._v("#")]),s._v(" å¤šç§é€‰æ‹©")]),s._v(" "),n("p",[s._v("åœ¨ç†è§£è¿™äº›é—®é¢˜ä¹‹å‰ï¼Œå¦‚æœä½ è¯•å›¾å®šä¹‰â€œSumâ€å¹¶åœ¨â€œAddElementâ€ä¸­ä½¿ç”¨å®ƒï¼Œä½ ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚ç°åœ¨ï¼Œæ‚¨çŸ¥é“å•ç‹¬å°†"),n("code",[s._v(":|")]),s._v("æ”¾å…¥å‡½æ•°ä¸­æ›´å®¹æ˜“ï¼Œå¹¶ä¸”æ‚¨çŸ¥é“æ‚¨éœ€è¦ç¼–å†™ä¸€ä¸ªç±»ä¼¼"),n("code",[s._v("SumMyWay")]),s._v("çš„å¼•ç†ã€‚æ‚¨å¯èƒ½ä¼šå¥½å¥‡ï¼Œå¦‚æœæ²¡æœ‰"),n("code",[s._v("Pick")]),s._v("å‡½æ•°ï¼Œæ˜¯å¦å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“æ˜¯å¦æœ‰ä»»ä½•æ–¹æ³•å¯ä»¥åœ¨"),n("code",[s._v("Sum")]),s._v("ä¸­ä½¿ç”¨ä¸€ä¸ª"),n("code",[s._v(":|")]),s._v("æ“ä½œç¬¦ï¼Œåœ¨"),n("code",[s._v("SumMyWay")]),s._v("ä¸­ä½¿ç”¨å¦ä¸€ä¸ª"),n("code",[s._v(":|")]),s._v("æ“ä½œç¬¦ã€‚æ˜¯çš„ï¼Œè¿™æ˜¯å¯èƒ½çš„ã€‚æˆ‘æ¥æ•™ä½ æ€ä¹ˆåšã€‚")]),s._v(" "),n("p",[s._v("å‡è®¾æˆ‘ä»¬åœ¨å‡½æ•°Sumä¸­å†…è”"),n("code",[s._v("Pick")]),s._v("ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾æˆ‘ä»¬åƒä¸Šé¢"),n("a",{attrs:{href:"http://leino.science/papers/krml274.html#sec-inlining-pick",target:"_blank",rel:"noopener noreferrer"}},[s._v("4"),n("OutboundLink")],1),s._v("èŠ‚é‚£æ ·å®šä¹‰â€œSumâ€ã€‚åœ¨é‚£ä¸€èŠ‚ä¸­ï¼Œæˆ‘æåˆ°ï¼Œå¦‚æœä½ ä¹Ÿå†…è”"),n("code",[s._v("Pick")]),s._v("åœ¨"),n("code",[s._v("SumMyWay")]),s._v("ï¼Œä½ ä¼šå¾—åˆ°ä¸€äº›é”™è¯¯ã€‚è¿™ä¸¤ä¸ªé”™è¯¯éƒ½æ˜¯å› ä¸ºâ€œSumâ€å’Œâ€œSumMyWayâ€åšå‡ºäº†ä¸åŒçš„é€‰æ‹©ã€‚ä½†æˆ‘ä»¬å¯ä»¥åœ¨å¼•ç†ä¸­æ›´å…·ä½“ä¸€äº›ï¼Œå¼ºåˆ¶å®ƒé€‰æ‹©ä¸"),n("code",[s._v("Sum")]),s._v("ä¸­é€‰æ‹©çš„å…ƒç´ ç›¸åŒçš„å…ƒç´ ã€‚")]),s._v(" "),n("p",[s._v("ä½ å¯ä»¥è¿™æ ·åšï¼Œä½ æƒ³è®©xä¸åªæ˜¯åœ¨sä¸­ï¼Œè€Œæ˜¯ä¸€ä¸ªå€¼")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Sum(s) == x + Sum(s - {x})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("æ²¡é”™ã€‚åªæœ‰ä¸€ä¸ªè¿™æ ·çš„xå­˜åœ¨ï¼Œå®ƒæ˜¯ç”±â€œSumâ€é€‰æ‹©çš„ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ è¿™æ ·å†™å¼•ç†:")]),s._v(" "),n("div",{staticClass:"language-dafny line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("lemma SumMyWay(s: set<int>, y: int)\n  requires y in s\n  ensures Sum(s) == y + Sum(s - {y})\n{\n  var x :| x in s && Sum(s) == x + Sum(s - {x});\n  if y == x {\n  } else {\n    // same calc statement as before...\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("ç„¶åéªŒè¯!çŸ¥é“è¿™ä¸€ç‚¹å¾ˆå¥½ï¼Œä½†æ˜¯åœ¨ä½ çš„"),n("code",[s._v(":|")]),s._v("å‘¨å›´å¼•å…¥"),n("code",[s._v("Pick")]),s._v("å‡½æ•°ä¼¼ä¹æ›´å¹²å‡€ã€‚")]),s._v(" "),n("h2",{attrs:{id:"æ€»ç»“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[s._v("#")]),s._v(" æ€»ç»“")]),s._v(" "),n("p",[s._v("æ³¨æ„ï¼Œç¨‹åºä¸­å‡ºç°çš„æ¯ä¸€ä¸ª"),n("code",[s._v(":|")]),s._v("æ–‡æœ¬éƒ½æ˜¯ä¸€ä¸ªä¸åŒçš„å‡½æ•°ã€‚å¦‚æœä½ å°†å®ƒæ•´åˆåˆ°ä¸€ä¸ªä½ å‘½åçš„å‡½æ•°ä¸­ï¼Œä½ å°†æ›´å®¹æ˜“ä½¿ç”¨"),n("code",[s._v(":|")]),s._v("ï¼Œå› ä¸ºè¿™æ ·ä½ å°±å‡å°‘äº†å› ä¸ºä¸åŒç§ç±»(ä¸åŒâ€œé¢œè‰²â€)çš„é€‰æ‹©è€Œæ„Ÿåˆ°å›°æƒ‘çš„æœºä¼šã€‚")]),s._v(" "),n("p",[s._v("å¦å¤–ï¼Œè¯·æ³¨æ„"),n("code",[s._v(":|")]),s._v("æ‰€åšçš„é€‰æ‹©å¯èƒ½ä¸æ˜¯æ‚¨éœ€è¦çš„é€‰æ‹©ã€‚ä½ å¯èƒ½æƒ³è¦è¯æ˜ä¸€ä¸ªå¼•ç†ï¼Œå®ƒè¯´ä»»ä½•é€‰æ‹©æœ€åéƒ½ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœã€‚ä½¿ç”¨ä¸Šé¢çš„â€œSumMyWayâ€å¼•ç†ä½œä¸ºä½ çš„è¯æ˜æ¨¡æ¿ã€‚")])])}),[],!1,null,null,null);a.default=t.exports}}]);