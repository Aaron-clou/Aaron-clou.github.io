(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{532:function(e,a,s){"use strict";s.r(a);var n=s(18),t=Object(n.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"谓词"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#谓词"}},[e._v("#")]),e._v(" 谓词")]),e._v(" "),s("p",[e._v("谓词是一个返回布尔值的函数。这是一个简单但强大的想法，发生在"),s("code",[e._v("Dafny")]),e._v("的程序。例如，我们将整数数组上的"),s("code",[e._v("sorted")]),e._v("谓词定义为一个函数，该函数接受一个数组作为参数，当且仅当该数组按递增顺序排序时，返回"),s("code",[e._v("true")]),e._v("。谓词的使用使我们的代码更短，因为我们不需要一遍又一遍地写出一个很长的属性。它还可以通过给一个公共属性命名来使我们的代码更容易阅读。\n我们有很多方法可以写"),s("code",[e._v("sorted")]),e._v("谓词，但最简单的是在数组的下标上使用一个量词。我们可以写一个量词来表示属性“如果数组中"),s("code",[e._v("x")]),e._v("在"),s("code",[e._v("y")]),e._v("之前，那么"),s("code",[e._v("x <= y")]),e._v("，作为一个量词在两个绑定变量上:")]),e._v(" "),s("div",{staticClass:"language-dafny line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("   forall j, k :: 0 <= j < k < a.Length ==> a[j] <= a[k]\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("这里我们有两个绑定变量，"),s("code",[e._v("j")]),e._v("和"),s("code",[e._v("k")]),e._v("，都是整数。两者之间的比较保证了它们在数组中都是有效的下标，并且"),s("code",[e._v("j")]),e._v("在"),s("code",[e._v("k")]),e._v("之前。然后第二部分说它们彼此之间的顺序是正确的。量词在"),s("code",[e._v("Dafny")]),e._v("中只是一种布尔值表达式，所以我们可以将排序谓词写为:")]),e._v(" "),s("div",{staticClass:"language-dafny line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("predicate sorted(a: array<int>)\n   requires a != null\n{\n   forall j, k :: 0 <= j < k < a.Length ==> a[j] <= a[k]\n}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[e._v("注意，没有返回类型，因为谓词总是返回布尔值。\n"),s("code",[e._v("Dafny")]),e._v("拒绝给出的这段代码，声称谓词读不出"),s("code",[e._v("a")]),e._v("。修复此问题需要另一个注释，读取注释。")])])}),[],!1,null,null,null);a.default=t.exports}}]);